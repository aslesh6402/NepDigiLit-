"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/student/exams/attempts/[attemptId]/route";
exports.ids = ["app/api/student/exams/attempts/[attemptId]/route"];
exports.modules = {

/***/ "@prisma/client":
/*!*********************************!*\
  !*** external "@prisma/client" ***!
  \*********************************/
/***/ ((module) => {

module.exports = require("@prisma/client");

/***/ }),

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fstudent%2Fexams%2Fattempts%2F%5BattemptId%5D%2Froute&page=%2Fapi%2Fstudent%2Fexams%2Fattempts%2F%5BattemptId%5D%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fstudent%2Fexams%2Fattempts%2F%5BattemptId%5D%2Froute.ts&appDir=C%3A%5CUsers%5Cpc%5CDownloads%5Cproject%5Cproject%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5Cpc%5CDownloads%5Cproject%5Cproject&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fstudent%2Fexams%2Fattempts%2F%5BattemptId%5D%2Froute&page=%2Fapi%2Fstudent%2Fexams%2Fattempts%2F%5BattemptId%5D%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fstudent%2Fexams%2Fattempts%2F%5BattemptId%5D%2Froute.ts&appDir=C%3A%5CUsers%5Cpc%5CDownloads%5Cproject%5Cproject%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5Cpc%5CDownloads%5Cproject%5Cproject&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var C_Users_pc_Downloads_project_project_src_app_api_student_exams_attempts_attemptId_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./src/app/api/student/exams/attempts/[attemptId]/route.ts */ \"(rsc)/./src/app/api/student/exams/attempts/[attemptId]/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/student/exams/attempts/[attemptId]/route\",\n        pathname: \"/api/student/exams/attempts/[attemptId]\",\n        filename: \"route\",\n        bundlePath: \"app/api/student/exams/attempts/[attemptId]/route\"\n    },\n    resolvedPagePath: \"C:\\\\Users\\\\pc\\\\Downloads\\\\project\\\\project\\\\src\\\\app\\\\api\\\\student\\\\exams\\\\attempts\\\\[attemptId]\\\\route.ts\",\n    nextConfigOutput,\n    userland: C_Users_pc_Downloads_project_project_src_app_api_student_exams_attempts_attemptId_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks } = routeModule;\nconst originalPathname = \"/api/student/exams/attempts/[attemptId]/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZzdHVkZW50JTJGZXhhbXMlMkZhdHRlbXB0cyUyRiU1QmF0dGVtcHRJZCU1RCUyRnJvdXRlJnBhZ2U9JTJGYXBpJTJGc3R1ZGVudCUyRmV4YW1zJTJGYXR0ZW1wdHMlMkYlNUJhdHRlbXB0SWQlNUQlMkZyb3V0ZSZhcHBQYXRocz0mcGFnZVBhdGg9cHJpdmF0ZS1uZXh0LWFwcC1kaXIlMkZhcGklMkZzdHVkZW50JTJGZXhhbXMlMkZhdHRlbXB0cyUyRiU1QmF0dGVtcHRJZCU1RCUyRnJvdXRlLnRzJmFwcERpcj1DJTNBJTVDVXNlcnMlNUNwYyU1Q0Rvd25sb2FkcyU1Q3Byb2plY3QlNUNwcm9qZWN0JTVDc3JjJTVDYXBwJnBhZ2VFeHRlbnNpb25zPXRzeCZwYWdlRXh0ZW5zaW9ucz10cyZwYWdlRXh0ZW5zaW9ucz1qc3gmcGFnZUV4dGVuc2lvbnM9anMmcm9vdERpcj1DJTNBJTVDVXNlcnMlNUNwYyU1Q0Rvd25sb2FkcyU1Q3Byb2plY3QlNUNwcm9qZWN0JmlzRGV2PXRydWUmdHNjb25maWdQYXRoPXRzY29uZmlnLmpzb24mYmFzZVBhdGg9JmFzc2V0UHJlZml4PSZuZXh0Q29uZmlnT3V0cHV0PSZwcmVmZXJyZWRSZWdpb249Jm1pZGRsZXdhcmVDb25maWc9ZTMwJTNEISIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7QUFBc0c7QUFDdkM7QUFDYztBQUMwRDtBQUN2STtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsZ0hBQW1CO0FBQzNDO0FBQ0EsY0FBYyx5RUFBUztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsWUFBWTtBQUNaLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQSxRQUFRLGlFQUFpRTtBQUN6RTtBQUNBO0FBQ0EsV0FBVyw0RUFBVztBQUN0QjtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ3VIOztBQUV2SCIsInNvdXJjZXMiOlsid2VicGFjazovL2RpZ2l0YWwtbGl0ZXJhY3ktcG9ydGFsLz9iNTRkIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEFwcFJvdXRlUm91dGVNb2R1bGUgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUtbW9kdWxlcy9hcHAtcm91dGUvbW9kdWxlLmNvbXBpbGVkXCI7XG5pbXBvcnQgeyBSb3V0ZUtpbmQgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUta2luZFwiO1xuaW1wb3J0IHsgcGF0Y2hGZXRjaCBhcyBfcGF0Y2hGZXRjaCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2xpYi9wYXRjaC1mZXRjaFwiO1xuaW1wb3J0ICogYXMgdXNlcmxhbmQgZnJvbSBcIkM6XFxcXFVzZXJzXFxcXHBjXFxcXERvd25sb2Fkc1xcXFxwcm9qZWN0XFxcXHByb2plY3RcXFxcc3JjXFxcXGFwcFxcXFxhcGlcXFxcc3R1ZGVudFxcXFxleGFtc1xcXFxhdHRlbXB0c1xcXFxbYXR0ZW1wdElkXVxcXFxyb3V0ZS50c1wiO1xuLy8gV2UgaW5qZWN0IHRoZSBuZXh0Q29uZmlnT3V0cHV0IGhlcmUgc28gdGhhdCB3ZSBjYW4gdXNlIHRoZW0gaW4gdGhlIHJvdXRlXG4vLyBtb2R1bGUuXG5jb25zdCBuZXh0Q29uZmlnT3V0cHV0ID0gXCJcIlxuY29uc3Qgcm91dGVNb2R1bGUgPSBuZXcgQXBwUm91dGVSb3V0ZU1vZHVsZSh7XG4gICAgZGVmaW5pdGlvbjoge1xuICAgICAgICBraW5kOiBSb3V0ZUtpbmQuQVBQX1JPVVRFLFxuICAgICAgICBwYWdlOiBcIi9hcGkvc3R1ZGVudC9leGFtcy9hdHRlbXB0cy9bYXR0ZW1wdElkXS9yb3V0ZVwiLFxuICAgICAgICBwYXRobmFtZTogXCIvYXBpL3N0dWRlbnQvZXhhbXMvYXR0ZW1wdHMvW2F0dGVtcHRJZF1cIixcbiAgICAgICAgZmlsZW5hbWU6IFwicm91dGVcIixcbiAgICAgICAgYnVuZGxlUGF0aDogXCJhcHAvYXBpL3N0dWRlbnQvZXhhbXMvYXR0ZW1wdHMvW2F0dGVtcHRJZF0vcm91dGVcIlxuICAgIH0sXG4gICAgcmVzb2x2ZWRQYWdlUGF0aDogXCJDOlxcXFxVc2Vyc1xcXFxwY1xcXFxEb3dubG9hZHNcXFxccHJvamVjdFxcXFxwcm9qZWN0XFxcXHNyY1xcXFxhcHBcXFxcYXBpXFxcXHN0dWRlbnRcXFxcZXhhbXNcXFxcYXR0ZW1wdHNcXFxcW2F0dGVtcHRJZF1cXFxccm91dGUudHNcIixcbiAgICBuZXh0Q29uZmlnT3V0cHV0LFxuICAgIHVzZXJsYW5kXG59KTtcbi8vIFB1bGwgb3V0IHRoZSBleHBvcnRzIHRoYXQgd2UgbmVlZCB0byBleHBvc2UgZnJvbSB0aGUgbW9kdWxlLiBUaGlzIHNob3VsZFxuLy8gYmUgZWxpbWluYXRlZCB3aGVuIHdlJ3ZlIG1vdmVkIHRoZSBvdGhlciByb3V0ZXMgdG8gdGhlIG5ldyBmb3JtYXQuIFRoZXNlXG4vLyBhcmUgdXNlZCB0byBob29rIGludG8gdGhlIHJvdXRlLlxuY29uc3QgeyByZXF1ZXN0QXN5bmNTdG9yYWdlLCBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcyB9ID0gcm91dGVNb2R1bGU7XG5jb25zdCBvcmlnaW5hbFBhdGhuYW1lID0gXCIvYXBpL3N0dWRlbnQvZXhhbXMvYXR0ZW1wdHMvW2F0dGVtcHRJZF0vcm91dGVcIjtcbmZ1bmN0aW9uIHBhdGNoRmV0Y2goKSB7XG4gICAgcmV0dXJuIF9wYXRjaEZldGNoKHtcbiAgICAgICAgc2VydmVySG9va3MsXG4gICAgICAgIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2VcbiAgICB9KTtcbn1cbmV4cG9ydCB7IHJvdXRlTW9kdWxlLCByZXF1ZXN0QXN5bmNTdG9yYWdlLCBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcywgb3JpZ2luYWxQYXRobmFtZSwgcGF0Y2hGZXRjaCwgIH07XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWFwcC1yb3V0ZS5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fstudent%2Fexams%2Fattempts%2F%5BattemptId%5D%2Froute&page=%2Fapi%2Fstudent%2Fexams%2Fattempts%2F%5BattemptId%5D%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fstudent%2Fexams%2Fattempts%2F%5BattemptId%5D%2Froute.ts&appDir=C%3A%5CUsers%5Cpc%5CDownloads%5Cproject%5Cproject%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5Cpc%5CDownloads%5Cproject%5Cproject&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./src/app/api/student/exams/attempts/[attemptId]/route.ts":
/*!*****************************************************************!*\
  !*** ./src/app/api/student/exams/attempts/[attemptId]/route.ts ***!
  \*****************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   POST: () => (/* binding */ POST),\n/* harmony export */   PUT: () => (/* binding */ PUT)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n/* harmony import */ var _lib_prisma__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/prisma */ \"(rsc)/./src/lib/prisma.ts\");\n\n\n// POST /api/student/exams/attempts/[attemptId] - Track cheating activities during exam\nasync function POST(request, { params }) {\n    try {\n        const body = await request.json();\n        const { eventType, timestamp, details } = body;\n        const attemptId = params.attemptId;\n        if (!attemptId || !eventType) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"Attempt ID and event type are required\"\n            }, {\n                status: 400\n            });\n        }\n        // Get the exam attempt\n        const attempt = await _lib_prisma__WEBPACK_IMPORTED_MODULE_1__.prisma.examAttempt.findUnique({\n            where: {\n                id: attemptId\n            },\n            include: {\n                exam: true\n            }\n        });\n        if (!attempt || attempt.status !== \"IN_PROGRESS\") {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"Invalid or completed exam attempt\"\n            }, {\n                status: 400\n            });\n        }\n        // Process different types of tracking events\n        let updateData = {};\n        let riskIncrease = 0;\n        let shouldFlag = false;\n        switch(eventType){\n            case \"TAB_SWITCH\":\n                updateData.tabSwitches = {\n                    increment: 1\n                };\n                updateData.tabSwitchTimes = {\n                    push: new Date().toISOString()\n                };\n                riskIncrease = 10;\n                if (!attempt.exam.allowTabSwitch) {\n                    shouldFlag = true;\n                    riskIncrease = 25;\n                } else if (attempt.tabSwitches >= attempt.exam.maxTabSwitches) {\n                    shouldFlag = true;\n                    riskIncrease = 30;\n                }\n                break;\n            case \"MOUSE_LEFT_WINDOW\":\n                updateData.mouseLeftCount = {\n                    increment: 1\n                };\n                riskIncrease = 5;\n                break;\n            case \"FULLSCREEN_EXIT\":\n                updateData.fullScreenExits = {\n                    increment: 1\n                };\n                riskIncrease = 15;\n                if (attempt.exam.fullScreenRequired) {\n                    shouldFlag = true;\n                    riskIncrease = 25;\n                }\n                break;\n            case \"RIGHT_CLICK\":\n                updateData.rightClicks = {\n                    increment: 1\n                };\n                riskIncrease = 3;\n                break;\n            case \"COPY_PASTE\":\n                updateData.copyPasteEvents = {\n                    increment: 1\n                };\n                riskIncrease = 20;\n                shouldFlag = true;\n                break;\n            case \"SUSPICIOUS_KEYBOARD\":\n                updateData.keyboardEvents = {\n                    push: {\n                        timestamp: new Date().toISOString(),\n                        details\n                    }\n                };\n                riskIncrease = 15;\n                break;\n            case \"DEVELOPER_TOOLS\":\n                riskIncrease = 50;\n                shouldFlag = true;\n                break;\n            default:\n                riskIncrease = 5;\n        }\n        // Update risk score\n        updateData.riskScore = {\n            increment: riskIncrease\n        };\n        // Add to suspicious flags\n        updateData.suspiciousFlags = {\n            push: {\n                type: eventType,\n                timestamp: new Date().toISOString(),\n                details: details || {}\n            }\n        };\n        // Update the attempt\n        const updatedAttempt = await _lib_prisma__WEBPACK_IMPORTED_MODULE_1__.prisma.examAttempt.update({\n            where: {\n                id: attemptId\n            },\n            data: updateData\n        });\n        // Create cheating incident if flagged\n        if (shouldFlag || updatedAttempt.riskScore + riskIncrease > 60) {\n            await _lib_prisma__WEBPACK_IMPORTED_MODULE_1__.prisma.cheatingIncident.create({\n                data: {\n                    userId: attempt.userId,\n                    examAttemptId: attemptId,\n                    incidentType: eventType,\n                    description: `${eventType} detected during exam`,\n                    evidence: {\n                        eventType,\n                        timestamp,\n                        details,\n                        currentRiskScore: updatedAttempt.riskScore + riskIncrease\n                    },\n                    severity: updatedAttempt.riskScore + riskIncrease > 80 ? \"CRITICAL\" : \"HIGH\"\n                }\n            });\n        }\n        // Auto-terminate if risk score is too high\n        if (updatedAttempt.riskScore + riskIncrease > 90) {\n            await _lib_prisma__WEBPACK_IMPORTED_MODULE_1__.prisma.examAttempt.update({\n                where: {\n                    id: attemptId\n                },\n                data: {\n                    status: \"FAILED\",\n                    endTime: new Date()\n                }\n            });\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                terminated: true,\n                message: \"Exam terminated due to suspicious activity\"\n            });\n        }\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            success: true,\n            riskScore: updatedAttempt.riskScore + riskIncrease,\n            warning: riskIncrease > 15 ? \"Suspicious activity detected\" : null\n        });\n    } catch (error) {\n        console.error(\"Error tracking exam activity:\", error);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: \"Failed to track activity\"\n        }, {\n            status: 500\n        });\n    }\n}\n// PUT /api/student/exams/attempts/[attemptId] - Submit exam answers\nasync function PUT(request, { params }) {\n    try {\n        const body = await request.json();\n        const { answers, timeSpent } = body;\n        const attemptId = params.attemptId;\n        if (!attemptId) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"Attempt ID is required\"\n            }, {\n                status: 400\n            });\n        }\n        // Get the exam attempt\n        const attempt = await _lib_prisma__WEBPACK_IMPORTED_MODULE_1__.prisma.examAttempt.findUnique({\n            where: {\n                id: attemptId\n            },\n            include: {\n                exam: true\n            }\n        });\n        if (!attempt) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"Exam attempt not found\"\n            }, {\n                status: 404\n            });\n        }\n        if (attempt.status !== \"IN_PROGRESS\") {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"Exam attempt is not in progress\"\n            }, {\n                status: 400\n            });\n        }\n        // Calculate score\n        const exam = attempt.exam;\n        const questions = exam.questions;\n        let totalScore = 0;\n        let maxScore = 0;\n        // Check answers and calculate score\n        for(let i = 0; i < questions.length; i++){\n            const question = questions[i];\n            const studentAnswer = answers[i.toString()];\n            maxScore += question.marks;\n            if (studentAnswer === question.correctAnswer) {\n                totalScore += question.marks;\n            }\n        }\n        const percentageScore = Math.round(totalScore / maxScore * 100);\n        // Final risk assessment\n        let finalRiskScore = attempt.riskScore;\n        // Check time spent patterns\n        const expectedMinTime = exam.duration * 60 * 0.2; // Minimum 20% of exam duration\n        if (timeSpent < expectedMinTime) {\n            finalRiskScore += 25;\n        }\n        // Determine final status\n        let finalStatus = \"COMPLETED\";\n        if (finalRiskScore > 70) {\n            finalStatus = \"FLAGGED\";\n        }\n        // Update attempt with final results\n        const updatedAttempt = await _lib_prisma__WEBPACK_IMPORTED_MODULE_1__.prisma.examAttempt.update({\n            where: {\n                id: attemptId\n            },\n            data: {\n                answers,\n                score: totalScore,\n                percentage: percentageScore,\n                timeSpent,\n                endTime: new Date(),\n                status: finalStatus,\n                riskScore: finalRiskScore,\n                isReviewed: false\n            }\n        });\n        // Create final cheating incident if flagged\n        if (finalStatus === \"FLAGGED\") {\n            await _lib_prisma__WEBPACK_IMPORTED_MODULE_1__.prisma.cheatingIncident.create({\n                data: {\n                    userId: attempt.userId,\n                    examAttemptId: attemptId,\n                    incidentType: \"DEVICE_MALFUNCTION\",\n                    description: `Exam flagged for review with risk score ${finalRiskScore}`,\n                    evidence: {\n                        finalRiskScore,\n                        timeSpent,\n                        tabSwitches: attempt.tabSwitches,\n                        suspiciousActivities: attempt.suspiciousFlags\n                    },\n                    severity: finalRiskScore > 85 ? \"CRITICAL\" : \"HIGH\"\n                }\n            });\n        }\n        // Return results (limited information for students)\n        const response = {\n            attempt: {\n                id: updatedAttempt.id,\n                status: updatedAttempt.status,\n                timeSpent,\n                submittedAt: updatedAttempt.endTime\n            }\n        };\n        // Only show score if exam allows it\n        if (exam.showResults) {\n            response.attempt.score = totalScore;\n            response.attempt.maxScore = maxScore;\n            response.attempt.percentage = percentageScore;\n            response.attempt.passed = totalScore >= exam.passingMarks;\n        } else {\n            response.message = \"Your exam has been submitted and will be reviewed by your teacher.\";\n        }\n        if (finalStatus === \"FLAGGED\") {\n            response.warning = \"Your exam has been flagged for review due to suspicious activity.\";\n        }\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json(response);\n    } catch (error) {\n        console.error(\"Error submitting exam:\", error);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: \"Failed to submit exam\"\n        }, {\n            status: 500\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvYXBwL2FwaS9zdHVkZW50L2V4YW1zL2F0dGVtcHRzL1thdHRlbXB0SWRdL3JvdXRlLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBd0Q7QUFDbEI7QUFFdEMsdUZBQXVGO0FBQ2hGLGVBQWVFLEtBQ3BCQyxPQUFvQixFQUNwQixFQUFFQyxNQUFNLEVBQXFDO0lBRTdDLElBQUk7UUFDRixNQUFNQyxPQUFPLE1BQU1GLFFBQVFHLElBQUk7UUFDL0IsTUFBTSxFQUFFQyxTQUFTLEVBQUVDLFNBQVMsRUFBRUMsT0FBTyxFQUFFLEdBQUdKO1FBQzFDLE1BQU1LLFlBQVlOLE9BQU9NLFNBQVM7UUFFbEMsSUFBSSxDQUFDQSxhQUFhLENBQUNILFdBQVc7WUFDNUIsT0FBT1AscURBQVlBLENBQUNNLElBQUksQ0FDdEI7Z0JBQUVLLE9BQU87WUFBeUMsR0FDbEQ7Z0JBQUVDLFFBQVE7WUFBSTtRQUVsQjtRQUVBLHVCQUF1QjtRQUN2QixNQUFNQyxVQUFVLE1BQU1aLCtDQUFNQSxDQUFDYSxXQUFXLENBQUNDLFVBQVUsQ0FBQztZQUNsREMsT0FBTztnQkFBRUMsSUFBSVA7WUFBVTtZQUN2QlEsU0FBUztnQkFBRUMsTUFBTTtZQUFLO1FBQ3hCO1FBRUEsSUFBSSxDQUFDTixXQUFXQSxRQUFRRCxNQUFNLEtBQUssZUFBZTtZQUNoRCxPQUFPWixxREFBWUEsQ0FBQ00sSUFBSSxDQUN0QjtnQkFBRUssT0FBTztZQUFvQyxHQUM3QztnQkFBRUMsUUFBUTtZQUFJO1FBRWxCO1FBRUEsNkNBQTZDO1FBQzdDLElBQUlRLGFBQWtCLENBQUM7UUFDdkIsSUFBSUMsZUFBZTtRQUNuQixJQUFJQyxhQUFhO1FBRWpCLE9BQVFmO1lBQ04sS0FBSztnQkFDSGEsV0FBV0csV0FBVyxHQUFHO29CQUFFQyxXQUFXO2dCQUFFO2dCQUN4Q0osV0FBV0ssY0FBYyxHQUFHO29CQUMxQkMsTUFBTSxJQUFJQyxPQUFPQyxXQUFXO2dCQUM5QjtnQkFDQVAsZUFBZTtnQkFFZixJQUFJLENB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eUI7d0JBQ0FkO3dCQUNBckMsYUFBYVYsUUFBUVUsV0FBVzt3QkFDaEMwRCxzQkFBc0JwRSxRQUFReUIsZUFBZTtvQkFDL0M7b0JBQ0FhLFVBQVV1QixpQkFBaUIsS0FBSyxhQUFhO2dCQUMvQztZQUNGO1FBQ0Y7UUFFQSxvREFBb0Q7UUFDcEQsTUFBTVEsV0FBZ0I7WUFDcEJyRSxTQUFTO2dCQUNQSSxJQUFJdUIsZUFBZXZCLEVBQUU7Z0JBQ3JCTCxRQUFRNEIsZUFBZTVCLE1BQU07Z0JBQzdCZ0Q7Z0JBQ0F1QixhQUFhM0MsZUFBZVksT0FBTztZQUNyQztRQUNGO1FBRUEsb0NBQW9DO1FBQ3BDLElBQUlqQyxLQUFLaUUsV0FBVyxFQUFFO1lBQ3BCRixTQUFTckUsT0FBTyxDQUFDaUUsS0FBSyxHQUFHaEI7WUFDekJvQixTQUFTckUsT0FBTyxDQUFDa0QsUUFBUSxHQUFHQTtZQUM1Qm1CLFNBQVNyRSxPQUFPLENBQUNrRSxVQUFVLEdBQUdSO1lBQzlCVyxTQUFTckUsT0FBTyxDQUFDd0UsTUFBTSxHQUFHdkIsY0FBYzNDLEtBQUttRSxZQUFZO1FBQzNELE9BQU87WUFDTEosU0FBUzVCLE9BQU8sR0FDZDtRQUNKO1FBRUEsSUFBSXVCLGdCQUFnQixXQUFXO1lBQzdCSyxTQUFTMUIsT0FBTyxHQUNkO1FBQ0o7UUFFQSxPQUFPeEQscURBQVlBLENBQUNNLElBQUksQ0FBQzRFO0lBQzNCLEVBQUUsT0FBT3ZFLE9BQU87UUFDZDhDLFFBQVE5QyxLQUFLLENBQUMsMEJBQTBCQTtRQUN4QyxPQUFPWCxxREFBWUEsQ0FBQ00sSUFBSSxDQUN0QjtZQUFFSyxPQUFPO1FBQXdCLEdBQ2pDO1lBQUVDLFFBQVE7UUFBSTtJQUVsQjtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZGlnaXRhbC1saXRlcmFjeS1wb3J0YWwvLi9zcmMvYXBwL2FwaS9zdHVkZW50L2V4YW1zL2F0dGVtcHRzL1thdHRlbXB0SWRdL3JvdXRlLnRzPzUxZjciXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgTmV4dFJlcXVlc3QsIE5leHRSZXNwb25zZSB9IGZyb20gXCJuZXh0L3NlcnZlclwiO1xuaW1wb3J0IHsgcHJpc21hIH0gZnJvbSBcIkAvbGliL3ByaXNtYVwiO1xuXG4vLyBQT1NUIC9hcGkvc3R1ZGVudC9leGFtcy9hdHRlbXB0cy9bYXR0ZW1wdElkXSAtIFRyYWNrIGNoZWF0aW5nIGFjdGl2aXRpZXMgZHVyaW5nIGV4YW1cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBQT1NUKFxuICByZXF1ZXN0OiBOZXh0UmVxdWVzdCxcbiAgeyBwYXJhbXMgfTogeyBwYXJhbXM6IHsgYXR0ZW1wdElkOiBzdHJpbmcgfSB9XG4pIHtcbiAgdHJ5IHtcbiAgICBjb25zdCBib2R5ID0gYXdhaXQgcmVxdWVzdC5qc29uKCk7XG4gICAgY29uc3QgeyBldmVudFR5cGUsIHRpbWVzdGFtcCwgZGV0YWlscyB9ID0gYm9keTtcbiAgICBjb25zdCBhdHRlbXB0SWQgPSBwYXJhbXMuYXR0ZW1wdElkO1xuXG4gICAgaWYgKCFhdHRlbXB0SWQgfHwgIWV2ZW50VHlwZSkge1xuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxuICAgICAgICB7IGVycm9yOiBcIkF0dGVtcHQgSUQgYW5kIGV2ZW50IHR5cGUgYXJlIHJlcXVpcmVkXCIgfSxcbiAgICAgICAgeyBzdGF0dXM6IDQwMCB9XG4gICAgICApO1xuICAgIH1cblxuICAgIC8vIEdldCB0aGUgZXhhbSBhdHRlbXB0XG4gICAgY29uc3QgYXR0ZW1wdCA9IGF3YWl0IHByaXNtYS5leGFtQXR0ZW1wdC5maW5kVW5pcXVlKHtcbiAgICAgIHdoZXJlOiB7IGlkOiBhdHRlbXB0SWQgfSxcbiAgICAgIGluY2x1ZGU6IHsgZXhhbTogdHJ1ZSB9LFxuICAgIH0pO1xuXG4gICAgaWYgKCFhdHRlbXB0IHx8IGF0dGVtcHQuc3RhdHVzICE9PSBcIklOX1BST0dSRVNTXCIpIHtcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcbiAgICAgICAgeyBlcnJvcjogXCJJbnZhbGlkIG9yIGNvbXBsZXRlZCBleGFtIGF0dGVtcHRcIiB9LFxuICAgICAgICB7IHN0YXR1czogNDAwIH1cbiAgICAgICk7XG4gICAgfVxuXG4gICAgLy8gUHJvY2VzcyBkaWZmZXJlbnQgdHlwZXMgb2YgdHJhY2tpbmcgZXZlbnRzXG4gICAgbGV0IHVwZGF0ZURhdGE6IGFueSA9IHt9O1xuICAgIGxldCByaXNrSW5jcmVhc2UgPSAwO1xuICAgIGxldCBzaG91bGRGbGFnID0gZmFsc2U7XG5cbiAgICBzd2l0Y2ggKGV2ZW50VHlwZSkge1xuICAgICAgY2FzZSBcIlRBQl9TV0lUQ0hcIjpcbiAgICAgICAgdXBkYXRlRGF0YS50YWJTd2l0Y2hlcyA9IHsgaW5jcmVtZW50OiAxIH07XG4gICAgICAgIHVwZGF0ZURhdGEudGFiU3dpdGNoVGltZXMgPSB7XG4gICAgICAgICAgcHVzaDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxuICAgICAgICB9O1xuICAgICAgICByaXNrSW5jcmVhc2UgPSAxMDtcblxuICAgICAgICBpZiAoIWF0dGVtcHQuZXhhbS5hbGxvd1RhYlN3aXRjaCkge1xuICAgICAgICAgIHNob3VsZEZsYWcgPSB0cnVlO1xuICAgICAgICAgIHJpc2tJbmNyZWFzZSA9IDI1O1xuICAgICAgICB9IGVsc2UgaWYgKGF0dGVtcHQudGFiU3dpdGNoZXMgPj0gYXR0ZW1wdC5leGFtLm1heFRhYlN3aXRjaGVzKSB7XG4gICAgICAgICAgc2hvdWxkRmxhZyA9IHRydWU7XG4gICAgICAgICAgcmlza0luY3JlYXNlID0gMzA7XG4gICAgICAgIH1cbiAgICAgICAgYnJlYWs7XG5cbiAgICAgIGNhc2UgXCJNT1VTRV9MRUZUX1dJTkRPV1wiOlxuICAgICAgICB1cGRhdGVEYXRhLm1vdXNlTGVmdENvdW50ID0geyBpbmNyZW1lbnQ6IDEgfTtcbiAgICAgICAgcmlza0luY3JlYXNlID0gNTtcbiAgICAgICAgYnJlYWs7XG5cbiAgICAgIGNhc2UgXCJGVUxMU0NSRUVOX0VYSVRcIjpcbiAgICAgICAgdXBkYXRlRGF0YS5mdWxsU2NyZWVuRXhpdHMgPSB7IGluY3JlbWVudDogMSB9O1xuICAgICAgICByaXNrSW5jcmVhc2UgPSAxNTtcblxuICAgICAgICBpZiAoYXR0ZW1wdC5leGFtLmZ1bGxTY3JlZW5SZXF1aXJlZCkge1xuICAgICAgICAgIHNob3VsZEZsYWcgPSB0cnVlO1xuICAgICAgICAgIHJpc2tJbmNyZWFzZSA9IDI1O1xuICAgICAgICB9XG4gICAgICAgIGJyZWFrO1xuXG4gICAgICBjYXNlIFwiUklHSFRfQ0xJQ0tcIjpcbiAgICAgICAgdXBkYXRlRGF0YS5yaWdodENsaWNrcyA9IHsgaW5jcmVtZW50OiAxIH07XG4gICAgICAgIHJpc2tJbmNyZWFzZSA9IDM7XG4gICAgICAgIGJyZWFrO1xuXG4gICAgICBjYXNlIFwiQ09QWV9QQVNURVwiOlxuICAgICAgICB1cGRhdGVEYXRhLmNvcHlQYXN0ZUV2ZW50cyA9IHsgaW5jcmVtZW50OiAxIH07XG4gICAgICAgIHJpc2tJbmNyZWFzZSA9IDIwO1xuICAgICAgICBzaG91bGRGbGFnID0gdHJ1ZTtcbiAgICAgICAgYnJlYWs7XG5cbiAgICAgIGNhc2UgXCJTVVNQSUNJT1VTX0tFWUJPQVJEXCI6XG4gICAgICAgIHVwZGF0ZURhdGEua2V5Ym9hcmRFdmVudHMgPSB7XG4gICAgICAgICAgcHVzaDogeyB0aW1lc3RhbXA6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSwgZGV0YWlscyB9LFxuICAgICAgICB9O1xuICAgICAgICByaXNrSW5jcmVhc2UgPSAxNTtcbiAgICAgICAgYnJlYWs7XG5cbiAgICAgIGNhc2UgXCJERVZFTE9QRVJfVE9PTFNcIjpcbiAgICAgICAgcmlza0luY3JlYXNlID0gNTA7XG4gICAgICAgIHNob3VsZEZsYWcgPSB0cnVlO1xuICAgICAgICBicmVhaztcblxuICAgICAgZGVmYXVsdDpcbiAgICAgICAgcmlza0luY3JlYXNlID0gNTtcbiAgICB9XG5cbiAgICAvLyBVcGRhdGUgcmlzayBzY29yZVxuICAgIHVwZGF0ZURhdGEucmlza1Njb3JlID0geyBpbmNyZW1lbnQ6IHJpc2tJbmNyZWFzZSB9O1xuXG4gICAgLy8gQWRkIHRvIHN1c3BpY2lvdXMgZmxhZ3NcbiAgICB1cGRhdGVEYXRhLnN1c3BpY2lvdXNGbGFncyA9IHtcbiAgICAgIHB1c2g6IHtcbiAgICAgICAgdHlwZTogZXZlbnRUeXBlLFxuICAgICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcbiAgICAgICAgZGV0YWlsczogZGV0YWlscyB8fCB7fSxcbiAgICAgIH0sXG4gICAgfTtcblxuICAgIC8vIFVwZGF0ZSB0aGUgYXR0ZW1wdFxuICAgIGNvbnN0IHVwZGF0ZWRBdHRlbXB0ID0gYXdhaXQgcHJpc21hLmV4YW1BdHRlbXB0LnVwZGF0ZSh7XG4gICAgICB3aGVyZTogeyBpZDogYXR0ZW1wdElkIH0sXG4gICAgICBkYXRhOiB1cGRhdGVEYXRhLFxuICAgIH0pO1xuXG4gICAgLy8gQ3JlYXRlIGNoZWF0aW5nIGluY2lkZW50IGlmIGZsYWdnZWRcbiAgICBpZiAoc2hvdWxkRmxhZyB8fCB1cGRhdGVkQXR0ZW1wdC5yaXNrU2NvcmUgKyByaXNrSW5jcmVhc2UgPiA2MCkge1xuICAgICAgYXdhaXQgcHJpc21hLmNoZWF0aW5nSW5jaWRlbnQuY3JlYXRlKHtcbiAgICAgICAgZGF0YToge1xuICAgICAgICAgIHVzZXJJZDogYXR0ZW1wdC51c2VySWQsXG4gICAgICAgICAgZXhhbUF0dGVtcHRJZDogYXR0ZW1wdElkLFxuICAgICAgICAgIGluY2lkZW50VHlwZTogZXZlbnRUeXBlIGFzIGFueSxcbiAgICAgICAgICBkZXNjcmlwdGlvbjogYCR7ZXZlbnRUeXBlfSBkZXRlY3RlZCBkdXJpbmcgZXhhbWAsXG4gICAgICAgICAgZXZpZGVuY2U6IHtcbiAgICAgICAgICAgIGV2ZW50VHlwZSxcbiAgICAgICAgICAgIHRpbWVzdGFtcCxcbiAgICAgICAgICAgIGRldGFpbHMsXG4gICAgICAgICAgICBjdXJyZW50Umlza1Njb3JlOiB1cGRhdGVkQXR0ZW1wdC5yaXNrU2NvcmUgKyByaXNrSW5jcmVhc2UsXG4gICAgICAgICAgfSxcbiAgICAgICAgICBzZXZlcml0eTpcbiAgICAgICAgICAgIHVwZGF0ZWRBdHRlbXB0LnJpc2tTY29yZSArIHJpc2tJbmNyZWFzZSA+IDgwID8gXCJDUklUSUNBTFwiIDogXCJISUdIXCIsXG4gICAgICAgIH0sXG4gICAgICB9KTtcbiAgICB9XG5cbiAgICAvLyBBdXRvLXRlcm1pbmF0ZSBpZiByaXNrIHNjb3JlIGlzIHRvbyBoaWdoXG4gICAgaWYgKHVwZGF0ZWRBdHRlbXB0LnJpc2tTY29yZSArIHJpc2tJbmNyZWFzZSA+IDkwKSB7XG4gICAgICBhd2FpdCBwcmlzbWEuZXhhbUF0dGVtcHQudXBkYXRlKHtcbiAgICAgICAgd2hlcmU6IHsgaWQ6IGF0dGVtcHRJZCB9LFxuICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgc3RhdHVzOiBcIkZBSUxFRFwiLFxuICAgICAgICAgIGVuZFRpbWU6IG5ldyBEYXRlKCksXG4gICAgICAgIH0sXG4gICAgICB9KTtcblxuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHtcbiAgICAgICAgdGVybWluYXRlZDogdHJ1ZSxcbiAgICAgICAgbWVzc2FnZTogXCJFeGFtIHRlcm1pbmF0ZWQgZHVlIHRvIHN1c3BpY2lvdXMgYWN0aXZpdHlcIixcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7XG4gICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgcmlza1Njb3JlOiB1cGRhdGVkQXR0ZW1wdC5yaXNrU2NvcmUgKyByaXNrSW5jcmVhc2UsXG4gICAgICB3YXJuaW5nOiByaXNrSW5jcmVhc2UgPiAxNSA/IFwiU3VzcGljaW91cyBhY3Rpdml0eSBkZXRlY3RlZFwiIDogbnVsbCxcbiAgICB9KTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgdHJhY2tpbmcgZXhhbSBhY3Rpdml0eTpcIiwgZXJyb3IpO1xuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcbiAgICAgIHsgZXJyb3I6IFwiRmFpbGVkIHRvIHRyYWNrIGFjdGl2aXR5XCIgfSxcbiAgICAgIHsgc3RhdHVzOiA1MDAgfVxuICAgICk7XG4gIH1cbn1cblxuLy8gUFVUIC9hcGkvc3R1ZGVudC9leGFtcy9hdHRlbXB0cy9bYXR0ZW1wdElkXSAtIFN1Ym1pdCBleGFtIGFuc3dlcnNcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBQVVQoXG4gIHJlcXVlc3Q6IE5leHRSZXF1ZXN0LFxuICB7IHBhcmFtcyB9OiB7IHBhcmFtczogeyBhdHRlbXB0SWQ6IHN0cmluZyB9IH1cbikge1xuICB0cnkge1xuICAgIGNvbnN0IGJvZHkgPSBhd2FpdCByZXF1ZXN0Lmpzb24oKTtcbiAgICBjb25zdCB7IGFuc3dlcnMsIHRpbWVTcGVudCB9ID0gYm9keTtcbiAgICBjb25zdCBhdHRlbXB0SWQgPSBwYXJhbXMuYXR0ZW1wdElkO1xuXG4gICAgaWYgKCFhdHRlbXB0SWQpIHtcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcbiAgICAgICAgeyBlcnJvcjogXCJBdHRlbXB0IElEIGlzIHJlcXVpcmVkXCIgfSxcbiAgICAgICAgeyBzdGF0dXM6IDQwMCB9XG4gICAgICApO1xuICAgIH1cblxuICAgIC8vIEdldCB0aGUgZXhhbSBhdHRlbXB0XG4gICAgY29uc3QgYXR0ZW1wdCA9IGF3YWl0IHByaXNtYS5leGFtQXR0ZW1wdC5maW5kVW5pcXVlKHtcbiAgICAgIHdoZXJlOiB7IGlkOiBhdHRlbXB0SWQgfSxcbiAgICAgIGluY2x1ZGU6IHsgZXhhbTogdHJ1ZSB9LFxuICAgIH0pO1xuXG4gICAgaWYgKCFhdHRlbXB0KSB7XG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXG4gICAgICAgIHsgZXJyb3I6IFwiRXhhbSBhdHRlbXB0IG5vdCBmb3VuZFwiIH0sXG4gICAgICAgIHsgc3RhdHVzOiA0MDQgfVxuICAgICAgKTtcbiAgICB9XG5cbiAgICBpZiAoYXR0ZW1wdC5zdGF0dXMgIT09IFwiSU5fUFJPR1JFU1NcIikge1xuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxuICAgICAgICB7IGVycm9yOiBcIkV4YW0gYXR0ZW1wdCBpcyBub3QgaW4gcHJvZ3Jlc3NcIiB9LFxuICAgICAgICB7IHN0YXR1czogNDAwIH1cbiAgICAgICk7XG4gICAgfVxuXG4gICAgLy8gQ2FsY3VsYXRlIHNjb3JlXG4gICAgY29uc3QgZXhhbSA9IGF0dGVtcHQuZXhhbTtcbiAgICBjb25zdCBxdWVzdGlvbnMgPSBleGFtLnF1ZXN0aW9ucyBhcyBhbnlbXTtcbiAgICBsZXQgdG90YWxTY29yZSA9IDA7XG4gICAgbGV0IG1heFNjb3JlID0gMDtcblxuICAgIC8vIENoZWNrIGFuc3dlcnMgYW5kIGNhbGN1bGF0ZSBzY29yZVxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcXVlc3Rpb25zLmxlbmd0aDsgaSsrKSB7XG4gICAgICBjb25zdCBxdWVzdGlvbiA9IHF1ZXN0aW9uc1tpXTtcbiAgICAgIGNvbnN0IHN0dWRlbnRBbnN3ZXIgPSBhbnN3ZXJzW2kudG9TdHJpbmcoKV07XG4gICAgICBtYXhTY29yZSArPSBxdWVzdGlvbi5tYXJrcztcblxuICAgICAgaWYgKHN0dWRlbnRBbnN3ZXIgPT09IHF1ZXN0aW9uLmNvcnJlY3RBbnN3ZXIpIHtcbiAgICAgICAgdG90YWxTY29yZSArPSBxdWVzdGlvbi5tYXJrcztcbiAgICAgIH1cbiAgICB9XG5cbiAgICBjb25zdCBwZXJjZW50YWdlU2NvcmUgPSBNYXRoLnJvdW5kKCh0b3RhbFNjb3JlIC8gbWF4U2NvcmUpICogMTAwKTtcblxuICAgIC8vIEZpbmFsIHJpc2sgYXNzZXNzbWVudFxuICAgIGxldCBmaW5hbFJpc2tTY29yZSA9IGF0dGVtcHQucmlza1Njb3JlO1xuXG4gICAgLy8gQ2hlY2sgdGltZSBzcGVudCBwYXR0ZXJuc1xuICAgIGNvbnN0IGV4cGVjdGVkTWluVGltZSA9IGV4YW0uZHVyYXRpb24gKiA2MCAqIDAuMjsgLy8gTWluaW11bSAyMCUgb2YgZXhhbSBkdXJhdGlvblxuICAgIGlmICh0aW1lU3BlbnQgPCBleHBlY3RlZE1pblRpbWUpIHtcbiAgICAgIGZpbmFsUmlza1Njb3JlICs9IDI1O1xuICAgIH1cblxuICAgIC8vIERldGVybWluZSBmaW5hbCBzdGF0dXNcbiAgICBsZXQgZmluYWxTdGF0dXMgPSBcIkNPTVBMRVRFRFwiO1xuICAgIGlmIChmaW5hbFJpc2tTY29yZSA+IDcwKSB7XG4gICAgICBmaW5hbFN0YXR1cyA9IFwiRkxBR0dFRFwiO1xuICAgIH1cblxuICAgIC8vIFVwZGF0ZSBhdHRlbXB0IHdpdGggZmluYWwgcmVzdWx0c1xuICAgIGNvbnN0IHVwZGF0ZWRBdHRlbXB0ID0gYXdhaXQgcHJpc21hLmV4YW1BdHRlbXB0LnVwZGF0ZSh7XG4gICAgICB3aGVyZTogeyBpZDogYXR0ZW1wdElkIH0sXG4gICAgICBkYXRhOiB7XG4gICAgICAgIGFuc3dlcnMsXG4gICAgICAgIHNjb3JlOiB0b3RhbFNjb3JlLFxuICAgICAgICBwZXJjZW50YWdlOiBwZXJjZW50YWdlU2NvcmUsXG4gICAgICAgIHRpbWVTcGVudCxcbiAgICAgICAgZW5kVGltZTogbmV3IERhdGUoKSxcbiAgICAgICAgc3RhdHVzOiBmaW5hbFN0YXR1cyBhcyBhbnksXG4gICAgICAgIHJpc2tTY29yZTogZmluYWxSaXNrU2NvcmUsXG4gICAgICAgIGlzUmV2aWV3ZWQ6IGZhbHNlLFxuICAgICAgfSxcbiAgICB9KTtcblxuICAgIC8vIENyZWF0ZSBmaW5hbCBjaGVhdGluZyBpbmNpZGVudCBpZiBmbGFnZ2VkXG4gICAgaWYgKGZpbmFsU3RhdHVzID09PSBcIkZMQUdHRURcIikge1xuICAgICAgYXdhaXQgcHJpc21hLmNoZWF0aW5nSW5jaWRlbnQuY3JlYXRlKHtcbiAgICAgICAgZGF0YToge1xuICAgICAgICAgIHVzZXJJZDogYXR0ZW1wdC51c2VySWQsXG4gICAgICAgICAgZXhhbUF0dGVtcHRJZDogYXR0ZW1wdElkLFxuICAgICAgICAgIGluY2lkZW50VHlwZTogXCJERVZJQ0VfTUFMRlVOQ1RJT05cIixcbiAgICAgICAgICBkZXNjcmlwdGlvbjogYEV4YW0gZmxhZ2dlZCBmb3IgcmV2aWV3IHdpdGggcmlzayBzY29yZSAke2ZpbmFsUmlza1Njb3JlfWAsXG4gICAgICAgICAgZXZpZGVuY2U6IHtcbiAgICAgICAgICAgIGZpbmFsUmlza1Njb3JlLFxuICAgICAgICAgICAgdGltZVNwZW50LFxuICAgICAgICAgICAgdGFiU3dpdGNoZXM6IGF0dGVtcHQudGFiU3dpdGNoZXMsXG4gICAgICAgICAgICBzdXNwaWNpb3VzQWN0aXZpdGllczogYXR0ZW1wdC5zdXNwaWNpb3VzRmxhZ3MsXG4gICAgICAgICAgfSxcbiAgICAgICAgICBzZXZlcml0eTogZmluYWxSaXNrU2NvcmUgPiA4NSA/IFwiQ1JJVElDQUxcIiA6IFwiSElHSFwiLFxuICAgICAgICB9LFxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgLy8gUmV0dXJuIHJlc3VsdHMgKGxpbWl0ZWQgaW5mb3JtYXRpb24gZm9yIHN0dWRlbnRzKVxuICAgIGNvbnN0IHJlc3BvbnNlOiBhbnkgPSB7XG4gICAgICBhdHRlbXB0OiB7XG4gICAgICAgIGlkOiB1cGRhdGVkQXR0ZW1wdC5pZCxcbiAgICAgICAgc3RhdHVzOiB1cGRhdGVkQXR0ZW1wdC5zdGF0dXMsXG4gICAgICAgIHRpbWVTcGVudCxcbiAgICAgICAgc3VibWl0dGVkQXQ6IHVwZGF0ZWRBdHRlbXB0LmVuZFRpbWUsXG4gICAgICB9LFxuICAgIH07XG5cbiAgICAvLyBPbmx5IHNob3cgc2NvcmUgaWYgZXhhbSBhbGxvd3MgaXRcbiAgICBpZiAoZXhhbS5zaG93UmVzdWx0cykge1xuICAgICAgcmVzcG9uc2UuYXR0ZW1wdC5zY29yZSA9IHRvdGFsU2NvcmU7XG4gICAgICByZXNwb25zZS5hdHRlbXB0Lm1heFNjb3JlID0gbWF4U2NvcmU7XG4gICAgICByZXNwb25zZS5hdHRlbXB0LnBlcmNlbnRhZ2UgPSBwZXJjZW50YWdlU2NvcmU7XG4gICAgICByZXNwb25zZS5hdHRlbXB0LnBhc3NlZCA9IHRvdGFsU2NvcmUgPj0gZXhhbS5wYXNzaW5nTWFya3M7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJlc3BvbnNlLm1lc3NhZ2UgPVxuICAgICAgICBcIllvdXIgZXhhbSBoYXMgYmVlbiBzdWJtaXR0ZWQgYW5kIHdpbGwgYmUgcmV2aWV3ZWQgYnkgeW91ciB0ZWFjaGVyLlwiO1xuICAgIH1cblxuICAgIGlmIChmaW5hbFN0YXR1cyA9PT0gXCJGTEFHR0VEXCIpIHtcbiAgICAgIHJlc3BvbnNlLndhcm5pbmcgPVxuICAgICAgICBcIllvdXIgZXhhbSBoYXMgYmVlbiBmbGFnZ2VkIGZvciByZXZpZXcgZHVlIHRvIHN1c3BpY2lvdXMgYWN0aXZpdHkuXCI7XG4gICAgfVxuXG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHJlc3BvbnNlKTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKFwiRXJyb3Igc3VibWl0dGluZyBleGFtOlwiLCBlcnJvcik7XG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxuICAgICAgeyBlcnJvcjogXCJGYWlsZWQgdG8gc3VibWl0IGV4YW1cIiB9LFxuICAgICAgeyBzdGF0dXM6IDUwMCB9XG4gICAgKTtcbiAgfVxufVxuIl0sIm5hbWVzIjpbIk5leHRSZXNwb25zZSIsInByaXNtYSIsIlBPU1QiLCJyZXF1ZXN0IiwicGFyYW1zIiwiYm9keSIsImpzb24iLCJldmVudFR5cGUiLCJ0aW1lc3RhbXAiLCJkZXRhaWxzIiwiYXR0ZW1wdElkIiwiZXJyb3IiLCJzdGF0dXMiLCJhdHRlbXB0IiwiZXhhbUF0dGVtcHQiLCJmaW5kVW5pcXVlIiwid2hlcmUiLCJpZCIsImluY2x1ZGUiLCJleGFtIiwidXBkYXRlRGF0YSIsInJpc2tJbmNyZWFzZSIsInNob3VsZEZsYWciLCJ0YWJTd2l0Y2hlcyIsImluY3JlbWVudCIsInRhYlN3aXRjaFRpbWVzIiwicHVzaCIsIkRhdGUiLCJ0b0lTT1N0cmluZyIsImFsbG93VGFiU3dpdGNoIiwibWF4VGFiU3dpdGNoZXMiLCJtb3VzZUxlZnRDb3VudCIsImZ1bGxTY3JlZW5FeGl0cyIsImZ1bGxTY3JlZW5SZXF1aXJlZCIsInJpZ2h0Q2xpY2tzIiwiY29weVBhc3RlRXZlbnRzIiwia2V5Ym9hcmRFdmVudHMiLCJyaXNrU2NvcmUiLCJzdXNwaWNpb3VzRmxhZ3MiLCJ0eXBlIiwidXBkYXRlZEF0dGVtcHQiLCJ1cGRhdGUiLCJkYXRhIiwiY2hlYXRpbmdJbmNpZGVudCIsImNyZWF0ZSIsInVzZXJJZCIsImV4YW1BdHRlbXB0SWQiLCJpbmNpZGVudFR5cGUiLCJkZXNjcmlwdGlvbiIsImV2aWRlbmNlIiwiY3VycmVudFJpc2tTY29yZSIsInNldmVyaXR5IiwiZW5kVGltZSIsInRlcm1pbmF0ZWQiLCJtZXNzYWdlIiwic3VjY2VzcyIsIndhcm5pbmciLCJjb25zb2xlIiwiUFVUIiwiYW5zd2VycyIsInRpbWVTcGVudCIsInF1ZXN0aW9ucyIsInRvdGFsU2NvcmUiLCJtYXhTY29yZSIsImkiLCJsZW5ndGgiLCJxdWVzdGlvbiIsInN0dWRlbnRBbnN3ZXIiLCJ0b1N0cmluZyIsIm1hcmtzIiwiY29ycmVjdEFuc3dlciIsInBlcmNlbnRhZ2VTY29yZSIsIk1hdGgiLCJyb3VuZCIsImZpbmFsUmlza1Njb3JlIiwiZXhwZWN0ZWRNaW5UaW1lIiwiZHVyYXRpb24iLCJmaW5hbFN0YXR1cyIsInNjb3JlIiwicGVyY2VudGFnZSIsImlzUmV2aWV3ZWQiLCJzdXNwaWNpb3VzQWN0aXZpdGllcyIsInJlc3BvbnNlIiwic3VibWl0dGVkQXQiLCJzaG93UmVzdWx0cyIsInBhc3NlZCIsInBhc3NpbmdNYXJrcyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./src/app/api/student/exams/attempts/[attemptId]/route.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/prisma.ts":
/*!***************************!*\
  !*** ./src/lib/prisma.ts ***!
  \***************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   prisma: () => (/* binding */ prisma)\n/* harmony export */ });\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @prisma/client */ \"@prisma/client\");\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_prisma_client__WEBPACK_IMPORTED_MODULE_0__);\n\nconst globalForPrisma = globalThis;\nconst prisma = globalForPrisma.prisma ?? new _prisma_client__WEBPACK_IMPORTED_MODULE_0__.PrismaClient();\nif (true) globalForPrisma.prisma = prisma;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbGliL3ByaXNtYS50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBNkM7QUFFN0MsTUFBTUMsa0JBQWtCQztBQUlqQixNQUFNQyxTQUFTRixnQkFBZ0JFLE1BQU0sSUFBSSxJQUFJSCx3REFBWUEsR0FBRTtBQUVsRSxJQUFJSSxJQUF5QixFQUFjSCxnQkFBZ0JFLE1BQU0sR0FBR0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9kaWdpdGFsLWxpdGVyYWN5LXBvcnRhbC8uL3NyYy9saWIvcHJpc21hLnRzPzAxZDciXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgUHJpc21hQ2xpZW50IH0gZnJvbSAnQHByaXNtYS9jbGllbnQnXG5cbmNvbnN0IGdsb2JhbEZvclByaXNtYSA9IGdsb2JhbFRoaXMgYXMgdW5rbm93biBhcyB7XG4gIHByaXNtYTogUHJpc21hQ2xpZW50IHwgdW5kZWZpbmVkXG59XG5cbmV4cG9ydCBjb25zdCBwcmlzbWEgPSBnbG9iYWxGb3JQcmlzbWEucHJpc21hID8/IG5ldyBQcmlzbWFDbGllbnQoKVxuXG5pZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgZ2xvYmFsRm9yUHJpc21hLnByaXNtYSA9IHByaXNtYSJdLCJuYW1lcyI6WyJQcmlzbWFDbGllbnQiLCJnbG9iYWxGb3JQcmlzbWEiLCJnbG9iYWxUaGlzIiwicHJpc21hIiwicHJvY2VzcyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/prisma.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fstudent%2Fexams%2Fattempts%2F%5BattemptId%5D%2Froute&page=%2Fapi%2Fstudent%2Fexams%2Fattempts%2F%5BattemptId%5D%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fstudent%2Fexams%2Fattempts%2F%5BattemptId%5D%2Froute.ts&appDir=C%3A%5CUsers%5Cpc%5CDownloads%5Cproject%5Cproject%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5Cpc%5CDownloads%5Cproject%5Cproject&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();
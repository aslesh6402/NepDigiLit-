"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/student/exams/route";
exports.ids = ["app/api/student/exams/route"];
exports.modules = {

/***/ "@prisma/client":
/*!*********************************!*\
  !*** external "@prisma/client" ***!
  \*********************************/
/***/ ((module) => {

module.exports = require("@prisma/client");

/***/ }),

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "buffer":
/*!*************************!*\
  !*** external "buffer" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("buffer");

/***/ }),

/***/ "crypto":
/*!*************************!*\
  !*** external "crypto" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("crypto");

/***/ }),

/***/ "stream":
/*!*************************!*\
  !*** external "stream" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("stream");

/***/ }),

/***/ "util":
/*!***********************!*\
  !*** external "util" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("util");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fstudent%2Fexams%2Froute&page=%2Fapi%2Fstudent%2Fexams%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fstudent%2Fexams%2Froute.ts&appDir=C%3A%5CUsers%5Cpc%5CDownloads%5Cproject%5Cproject%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5Cpc%5CDownloads%5Cproject%5Cproject&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!*********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fstudent%2Fexams%2Froute&page=%2Fapi%2Fstudent%2Fexams%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fstudent%2Fexams%2Froute.ts&appDir=C%3A%5CUsers%5Cpc%5CDownloads%5Cproject%5Cproject%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5Cpc%5CDownloads%5Cproject%5Cproject&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \*********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var C_Users_pc_Downloads_project_project_src_app_api_student_exams_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./src/app/api/student/exams/route.ts */ \"(rsc)/./src/app/api/student/exams/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/student/exams/route\",\n        pathname: \"/api/student/exams\",\n        filename: \"route\",\n        bundlePath: \"app/api/student/exams/route\"\n    },\n    resolvedPagePath: \"C:\\\\Users\\\\pc\\\\Downloads\\\\project\\\\project\\\\src\\\\app\\\\api\\\\student\\\\exams\\\\route.ts\",\n    nextConfigOutput,\n    userland: C_Users_pc_Downloads_project_project_src_app_api_student_exams_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks } = routeModule;\nconst originalPathname = \"/api/student/exams/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZzdHVkZW50JTJGZXhhbXMlMkZyb3V0ZSZwYWdlPSUyRmFwaSUyRnN0dWRlbnQlMkZleGFtcyUyRnJvdXRlJmFwcFBhdGhzPSZwYWdlUGF0aD1wcml2YXRlLW5leHQtYXBwLWRpciUyRmFwaSUyRnN0dWRlbnQlMkZleGFtcyUyRnJvdXRlLnRzJmFwcERpcj1DJTNBJTVDVXNlcnMlNUNwYyU1Q0Rvd25sb2FkcyU1Q3Byb2plY3QlNUNwcm9qZWN0JTVDc3JjJTVDYXBwJnBhZ2VFeHRlbnNpb25zPXRzeCZwYWdlRXh0ZW5zaW9ucz10cyZwYWdlRXh0ZW5zaW9ucz1qc3gmcGFnZUV4dGVuc2lvbnM9anMmcm9vdERpcj1DJTNBJTVDVXNlcnMlNUNwYyU1Q0Rvd25sb2FkcyU1Q3Byb2plY3QlNUNwcm9qZWN0JmlzRGV2PXRydWUmdHNjb25maWdQYXRoPXRzY29uZmlnLmpzb24mYmFzZVBhdGg9JmFzc2V0UHJlZml4PSZuZXh0Q29uZmlnT3V0cHV0PSZwcmVmZXJyZWRSZWdpb249Jm1pZGRsZXdhcmVDb25maWc9ZTMwJTNEISIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7QUFBc0c7QUFDdkM7QUFDYztBQUNtQztBQUNoSDtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsZ0hBQW1CO0FBQzNDO0FBQ0EsY0FBYyx5RUFBUztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsWUFBWTtBQUNaLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQSxRQUFRLGlFQUFpRTtBQUN6RTtBQUNBO0FBQ0EsV0FBVyw0RUFBVztBQUN0QjtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ3VIOztBQUV2SCIsInNvdXJjZXMiOlsid2VicGFjazovL2RpZ2l0YWwtbGl0ZXJhY3ktcG9ydGFsLz83MDdjIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEFwcFJvdXRlUm91dGVNb2R1bGUgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUtbW9kdWxlcy9hcHAtcm91dGUvbW9kdWxlLmNvbXBpbGVkXCI7XG5pbXBvcnQgeyBSb3V0ZUtpbmQgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUta2luZFwiO1xuaW1wb3J0IHsgcGF0Y2hGZXRjaCBhcyBfcGF0Y2hGZXRjaCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2xpYi9wYXRjaC1mZXRjaFwiO1xuaW1wb3J0ICogYXMgdXNlcmxhbmQgZnJvbSBcIkM6XFxcXFVzZXJzXFxcXHBjXFxcXERvd25sb2Fkc1xcXFxwcm9qZWN0XFxcXHByb2plY3RcXFxcc3JjXFxcXGFwcFxcXFxhcGlcXFxcc3R1ZGVudFxcXFxleGFtc1xcXFxyb3V0ZS50c1wiO1xuLy8gV2UgaW5qZWN0IHRoZSBuZXh0Q29uZmlnT3V0cHV0IGhlcmUgc28gdGhhdCB3ZSBjYW4gdXNlIHRoZW0gaW4gdGhlIHJvdXRlXG4vLyBtb2R1bGUuXG5jb25zdCBuZXh0Q29uZmlnT3V0cHV0ID0gXCJcIlxuY29uc3Qgcm91dGVNb2R1bGUgPSBuZXcgQXBwUm91dGVSb3V0ZU1vZHVsZSh7XG4gICAgZGVmaW5pdGlvbjoge1xuICAgICAgICBraW5kOiBSb3V0ZUtpbmQuQVBQX1JPVVRFLFxuICAgICAgICBwYWdlOiBcIi9hcGkvc3R1ZGVudC9leGFtcy9yb3V0ZVwiLFxuICAgICAgICBwYXRobmFtZTogXCIvYXBpL3N0dWRlbnQvZXhhbXNcIixcbiAgICAgICAgZmlsZW5hbWU6IFwicm91dGVcIixcbiAgICAgICAgYnVuZGxlUGF0aDogXCJhcHAvYXBpL3N0dWRlbnQvZXhhbXMvcm91dGVcIlxuICAgIH0sXG4gICAgcmVzb2x2ZWRQYWdlUGF0aDogXCJDOlxcXFxVc2Vyc1xcXFxwY1xcXFxEb3dubG9hZHNcXFxccHJvamVjdFxcXFxwcm9qZWN0XFxcXHNyY1xcXFxhcHBcXFxcYXBpXFxcXHN0dWRlbnRcXFxcZXhhbXNcXFxccm91dGUudHNcIixcbiAgICBuZXh0Q29uZmlnT3V0cHV0LFxuICAgIHVzZXJsYW5kXG59KTtcbi8vIFB1bGwgb3V0IHRoZSBleHBvcnRzIHRoYXQgd2UgbmVlZCB0byBleHBvc2UgZnJvbSB0aGUgbW9kdWxlLiBUaGlzIHNob3VsZFxuLy8gYmUgZWxpbWluYXRlZCB3aGVuIHdlJ3ZlIG1vdmVkIHRoZSBvdGhlciByb3V0ZXMgdG8gdGhlIG5ldyBmb3JtYXQuIFRoZXNlXG4vLyBhcmUgdXNlZCB0byBob29rIGludG8gdGhlIHJvdXRlLlxuY29uc3QgeyByZXF1ZXN0QXN5bmNTdG9yYWdlLCBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcyB9ID0gcm91dGVNb2R1bGU7XG5jb25zdCBvcmlnaW5hbFBhdGhuYW1lID0gXCIvYXBpL3N0dWRlbnQvZXhhbXMvcm91dGVcIjtcbmZ1bmN0aW9uIHBhdGNoRmV0Y2goKSB7XG4gICAgcmV0dXJuIF9wYXRjaEZldGNoKHtcbiAgICAgICAgc2VydmVySG9va3MsXG4gICAgICAgIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2VcbiAgICB9KTtcbn1cbmV4cG9ydCB7IHJvdXRlTW9kdWxlLCByZXF1ZXN0QXN5bmNTdG9yYWdlLCBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcywgb3JpZ2luYWxQYXRobmFtZSwgcGF0Y2hGZXRjaCwgIH07XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWFwcC1yb3V0ZS5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fstudent%2Fexams%2Froute&page=%2Fapi%2Fstudent%2Fexams%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fstudent%2Fexams%2Froute.ts&appDir=C%3A%5CUsers%5Cpc%5CDownloads%5Cproject%5Cproject%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5Cpc%5CDownloads%5Cproject%5Cproject&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./src/app/api/student/exams/route.ts":
/*!********************************************!*\
  !*** ./src/app/api/student/exams/route.ts ***!
  \********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GET: () => (/* binding */ GET),\n/* harmony export */   POST: () => (/* binding */ POST)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n/* harmony import */ var _lib_prisma__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/prisma */ \"(rsc)/./src/lib/prisma.ts\");\n/* harmony import */ var _lib_auth__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/lib/auth */ \"(rsc)/./src/lib/auth.ts\");\n\n\n\n// GET /api/student/exams - Get available exams for student\nasync function GET(request) {\n    try {\n        const { searchParams } = new URL(request.url);\n        const userId = searchParams.get(\"userId\");\n        const moduleId = searchParams.get(\"moduleId\");\n        // First try to get user from request headers for authentication\n        const authenticatedUser = await (0,_lib_auth__WEBPACK_IMPORTED_MODULE_2__.getUserFromRequest)(request);\n        let studentUserId = userId;\n        // If authenticated, use the authenticated user's ID for security\n        if (authenticatedUser && authenticatedUser.role === \"STUDENT\") {\n            studentUserId = authenticatedUser.id;\n        } else if (!userId) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"User ID is required\"\n            }, {\n                status: 400\n            });\n        }\n        if (!studentUserId) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"User ID is required\"\n            }, {\n                status: 400\n            });\n        }\n        const where = {\n            isActive: true,\n            startDate: {\n                lte: new Date()\n            },\n            endDate: {\n                gte: new Date()\n            }\n        };\n        // Only filter by moduleId if it's specifically provided\n        if (moduleId) {\n            where.moduleId = moduleId;\n        }\n        const exams = await _lib_prisma__WEBPACK_IMPORTED_MODULE_1__.prisma.exam.findMany({\n            where,\n            include: {\n                teacher: {\n                    select: {\n                        id: true,\n                        name: true\n                    }\n                },\n                module: {\n                    select: {\n                        id: true,\n                        title: true\n                    }\n                },\n                attempts: {\n                    where: {\n                        userId: studentUserId\n                    },\n                    orderBy: {\n                        createdAt: \"desc\"\n                    }\n                }\n            },\n            orderBy: [\n                {\n                    moduleId: \"asc\"\n                },\n                {\n                    title: \"asc\"\n                }\n            ]\n        });\n        console.log(`Found ${exams.length} exams for student ${studentUserId}`);\n        // Add attempt information for each exam\n        const examsWithAttempts = exams.map((exam)=>{\n            const userAttempts = exam.attempts;\n            const completedAttempts = userAttempts.filter((a)=>a.status === \"COMPLETED\").length;\n            const canAttempt = completedAttempts < exam.maxAttempts;\n            const bestScore = userAttempts.length > 0 ? Math.max(...userAttempts.filter((a)=>a.score !== null).map((a)=>a.score)) : null;\n            const examWithStats = {\n                ...exam,\n                attempts: undefined,\n                questions: undefined,\n                userStats: {\n                    attemptCount: userAttempts.length,\n                    completedAttempts,\n                    canAttempt,\n                    bestScore,\n                    hasPassed: bestScore !== null && bestScore >= exam.passingMarks,\n                    lastAttemptStatus: userAttempts.length > 0 ? userAttempts[0].status : null\n                }\n            };\n            // Log exams without module for debugging\n            if (!exam.module && !exam.moduleId) {\n                console.log(`Exam ${exam.id} (${exam.title}) has no module assignment`);\n            }\n            return examWithStats;\n        });\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            exams: examsWithAttempts\n        });\n    } catch (error) {\n        console.error(\"Error fetching student exams:\", error);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: \"Failed to fetch exams\"\n        }, {\n            status: 500\n        });\n    }\n}\n// POST /api/student/exams - Start a new exam attempt with proctoring\nasync function POST(request) {\n    try {\n        const body = await request.json();\n        const { examId, userId, deviceInfo } = body;\n        if (!examId || !userId) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"Exam ID and User ID are required\"\n            }, {\n                status: 400\n            });\n        }\n        // Get exam details\n        const exam = await _lib_prisma__WEBPACK_IMPORTED_MODULE_1__.prisma.exam.findUnique({\n            where: {\n                id: examId\n            },\n            include: {\n                attempts: {\n                    where: {\n                        userId\n                    }\n                }\n            }\n        });\n        if (!exam) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"Exam not found\"\n            }, {\n                status: 404\n            });\n        }\n        if (!exam.isActive) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"Exam is not active\"\n            }, {\n                status: 400\n            });\n        }\n        // Check if exam is within time bounds\n        const now = new Date();\n        if (exam.startDate > now) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"Exam has not started yet\"\n            }, {\n                status: 400\n            });\n        }\n        if (exam.endDate < now) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"Exam has ended\"\n            }, {\n                status: 400\n            });\n        }\n        // Check attempt limits\n        const completedAttempts = exam.attempts.filter((a)=>a.status === \"COMPLETED\" || a.status === \"FAILED\").length;\n        if (completedAttempts >= exam.maxAttempts) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"Maximum attempts reached\"\n            }, {\n                status: 400\n            });\n        }\n        // Check for existing in-progress attempt\n        const inProgressAttempt = exam.attempts.find((a)=>a.status === \"IN_PROGRESS\");\n        if (inProgressAttempt) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"You have an in-progress attempt. Please complete it first.\"\n            }, {\n                status: 400\n            });\n        }\n        // Get client information\n        const userAgent = request.headers.get(\"user-agent\") || \"\";\n        const ipAddress = request.headers.get(\"x-forwarded-for\") || request.headers.get(\"x-real-ip\") || \"unknown\";\n        // Validate device info for proctoring\n        if (exam.proctoringEnabled && (!deviceInfo || !deviceInfo.screenResolution)) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"Device information required for proctored exam\"\n            }, {\n                status: 400\n            });\n        }\n        // Prepare questions (remove correct answers)\n        const questionsForStudent = exam.questions.map((q, index)=>({\n                id: index,\n                question: q.question,\n                options: exam.shuffleOptions ? shuffleArray([\n                    ...q.options\n                ]) : q.options,\n                marks: q.marks\n            }));\n        // Shuffle questions if required\n        const finalQuestions = exam.shuffleQuestions ? shuffleArray([\n            ...questionsForStudent\n        ]) : questionsForStudent;\n        // Create exam attempt\n        const attempt = await _lib_prisma__WEBPACK_IMPORTED_MODULE_1__.prisma.examAttempt.create({\n            data: {\n                examId,\n                userId,\n                answers: {},\n                timeSpent: 0,\n                ipAddress,\n                userAgent: {\n                    userAgent,\n                    ...deviceInfo\n                },\n                screenResolution: deviceInfo?.screenResolution || {},\n                status: \"IN_PROGRESS\"\n            }\n        });\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            attempt: {\n                id: attempt.id,\n                examId: attempt.examId,\n                startTime: attempt.startTime,\n                duration: exam.duration,\n                totalMarks: exam.totalMarks,\n                questions: finalQuestions,\n                proctoringSettings: {\n                    proctoringEnabled: exam.proctoringEnabled,\n                    allowTabSwitch: exam.allowTabSwitch,\n                    maxTabSwitches: exam.maxTabSwitches,\n                    webcamRequired: exam.webcamRequired,\n                    fullScreenRequired: exam.fullScreenRequired\n                }\n            }\n        });\n    } catch (error) {\n        console.error(\"Error starting exam attempt:\", error);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: \"Failed to start exam attempt\"\n        }, {\n            status: 500\n        });\n    }\n}\n// Utility function to shuffle array\nfunction shuffleArray(array) {\n    const shuffled = [\n        ...array\n    ];\n    for(let i = shuffled.length - 1; i > 0; i--){\n        const j = Math.floor(Math.random() * (i + 1));\n        [shuffled[i], shuffled[j]] = [\n            shuffled[j],\n            shuffled[i]\n        ];\n    }\n    return shuffled;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvYXBwL2FwaS9zdHVkZW50L2V4YW1zL3JvdXRlLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQXdEO0FBQ2xCO0FBQ1U7QUFFaEQsMkRBQTJEO0FBQ3BELGVBQWVHLElBQUlDLE9BQW9CO0lBQzVDLElBQUk7UUFDRixNQUFNLEVBQUVDLFlBQVksRUFBRSxHQUFHLElBQUlDLElBQUlGLFFBQVFHLEdBQUc7UUFDNUMsTUFBTUMsU0FBU0gsYUFBYUksR0FBRyxDQUFDO1FBQ2hDLE1BQU1DLFdBQVdMLGFBQWFJLEdBQUcsQ0FBQztRQUVsQyxnRUFBZ0U7UUFDaEUsTUFBTUUsb0JBQW9CLE1BQU1ULDZEQUFrQkEsQ0FBQ0U7UUFDbkQsSUFBSVEsZ0JBQWdCSjtRQUVwQixpRUFBaUU7UUFDakUsSUFBSUcscUJBQXFCQSxrQkFBa0JFLElBQUksS0FBSyxXQUFXO1lBQzdERCxnQkFBZ0JELGtCQUFrQkcsRUFBRTtRQUN0QyxPQUFPLElBQUksQ0FBQ04sUUFBUTtZQUNsQixPQUFPUixxREFBWUEsQ0FBQ2UsSUFBSSxDQUN0QjtnQkFBRUMsT0FBTztZQUFzQixHQUMvQjtnQkFBRUMsUUFBUTtZQUFJO1FBRWxCO1FBRUEsSUFBSSxDQUFDTCxlQUFlO1lBQ2xCLE9BQU9aLHFEQUFZQSxDQUFDZSxJQUFJLENBQ3RCO2dCQUFFQyxPQUFPO1lBQXNCLEdBQy9CO2dCQUFFQyxRQUFRO1lBQUk7UUFFbEI7UUFFQSxNQUFNQyxRQUFhO1lBQ2pCQyxVQUFVO1lBQ1ZDLFdBQVc7Z0JBQUVDLEtBQUssSUFBSUM7WUFBTztZQUM3QkMsU0FBUztnQkFBRUMsS0FBSyxJQUFJRjtZQUFPO1FBQzdCO1FBRUEsd0RBQXdEO1FBQ3hELElBQUlaLFVBQVU7WUFDWlEsTUFBTVIsUUFBUSxHQUFHQTtRQUNuQjtRQUVBLE1BQU1lLFFBQVEsTUFBTXhCLCtDQUFNQSxDQUFDeUIsSUFBSSxDQUFDQyxRQUFRLENBQUM7WUFDdkNUO1lBQ0FVLFNBQVM7Z0JBQ1BDLFNBQVM7b0JBQ1BDLFFB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Qm9FLFNBQVM7Z0JBQ1ByRSxJQUFJcUUsUUFBUXJFLEVBQUU7Z0JBQ2RnRCxRQUFRcUIsUUFBUXJCLE1BQU07Z0JBQ3RCMkIsV0FBV04sUUFBUU0sU0FBUztnQkFDNUJDLFVBQVVoRSxLQUFLZ0UsUUFBUTtnQkFDdkJDLFlBQVlqRSxLQUFLaUUsVUFBVTtnQkFDM0JyQyxXQUFXMkI7Z0JBQ1hXLG9CQUFvQjtvQkFDbEJyQixtQkFBbUI3QyxLQUFLNkMsaUJBQWlCO29CQUN6Q3NCLGdCQUFnQm5FLEtBQUttRSxjQUFjO29CQUNuQ0MsZ0JBQWdCcEUsS0FBS29FLGNBQWM7b0JBQ25DQyxnQkFBZ0JyRSxLQUFLcUUsY0FBYztvQkFDbkNDLG9CQUFvQnRFLEtBQUtzRSxrQkFBa0I7Z0JBQzdDO1lBQ0Y7UUFDRjtJQUNGLEVBQUUsT0FBT2hGLE9BQU87UUFDZHFCLFFBQVFyQixLQUFLLENBQUMsZ0NBQWdDQTtRQUM5QyxPQUFPaEIscURBQVlBLENBQUNlLElBQUksQ0FDdEI7WUFBRUMsT0FBTztRQUErQixHQUN4QztZQUFFQyxRQUFRO1FBQUk7SUFFbEI7QUFDRjtBQUVBLG9DQUFvQztBQUNwQyxTQUFTOEQsYUFBYWtCLEtBQVk7SUFDaEMsTUFBTUMsV0FBVztXQUFJRDtLQUFNO0lBQzNCLElBQUssSUFBSUUsSUFBSUQsU0FBUzNELE1BQU0sR0FBRyxHQUFHNEQsSUFBSSxHQUFHQSxJQUFLO1FBQzVDLE1BQU1DLElBQUluRCxLQUFLb0QsS0FBSyxDQUFDcEQsS0FBS3FELE1BQU0sS0FBTUgsQ0FBQUEsSUFBSTtRQUMxQyxDQUFDRCxRQUFRLENBQUNDLEVBQUUsRUFBRUQsUUFBUSxDQUFDRSxFQUFFLENBQUMsR0FBRztZQUFDRixRQUFRLENBQUNFLEVBQUU7WUFBRUYsUUFBUSxDQUFDQyxFQUFFO1NBQUM7SUFDekQ7SUFDQSxPQUFPRDtBQUNUIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZGlnaXRhbC1saXRlcmFjeS1wb3J0YWwvLi9zcmMvYXBwL2FwaS9zdHVkZW50L2V4YW1zL3JvdXRlLnRzPzFlY2UiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgTmV4dFJlcXVlc3QsIE5leHRSZXNwb25zZSB9IGZyb20gXCJuZXh0L3NlcnZlclwiO1xuaW1wb3J0IHsgcHJpc21hIH0gZnJvbSBcIkAvbGliL3ByaXNtYVwiO1xuaW1wb3J0IHsgZ2V0VXNlckZyb21SZXF1ZXN0IH0gZnJvbSBcIkAvbGliL2F1dGhcIjtcblxuLy8gR0VUIC9hcGkvc3R1ZGVudC9leGFtcyAtIEdldCBhdmFpbGFibGUgZXhhbXMgZm9yIHN0dWRlbnRcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBHRVQocmVxdWVzdDogTmV4dFJlcXVlc3QpIHtcbiAgdHJ5IHtcbiAgICBjb25zdCB7IHNlYXJjaFBhcmFtcyB9ID0gbmV3IFVSTChyZXF1ZXN0LnVybCk7XG4gICAgY29uc3QgdXNlcklkID0gc2VhcmNoUGFyYW1zLmdldChcInVzZXJJZFwiKTtcbiAgICBjb25zdCBtb2R1bGVJZCA9IHNlYXJjaFBhcmFtcy5nZXQoXCJtb2R1bGVJZFwiKTtcblxuICAgIC8vIEZpcnN0IHRyeSB0byBnZXQgdXNlciBmcm9tIHJlcXVlc3QgaGVhZGVycyBmb3IgYXV0aGVudGljYXRpb25cbiAgICBjb25zdCBhdXRoZW50aWNhdGVkVXNlciA9IGF3YWl0IGdldFVzZXJGcm9tUmVxdWVzdChyZXF1ZXN0KTtcbiAgICBsZXQgc3R1ZGVudFVzZXJJZCA9IHVzZXJJZDtcblxuICAgIC8vIElmIGF1dGhlbnRpY2F0ZWQsIHVzZSB0aGUgYXV0aGVudGljYXRlZCB1c2VyJ3MgSUQgZm9yIHNlY3VyaXR5XG4gICAgaWYgKGF1dGhlbnRpY2F0ZWRVc2VyICYmIGF1dGhlbnRpY2F0ZWRVc2VyLnJvbGUgPT09IFwiU1RVREVOVFwiKSB7XG4gICAgICBzdHVkZW50VXNlcklkID0gYXV0aGVudGljYXRlZFVzZXIuaWQ7XG4gICAgfSBlbHNlIGlmICghdXNlcklkKSB7XG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXG4gICAgICAgIHsgZXJyb3I6IFwiVXNlciBJRCBpcyByZXF1aXJlZFwiIH0sXG4gICAgICAgIHsgc3RhdHVzOiA0MDAgfVxuICAgICAgKTtcbiAgICB9XG5cbiAgICBpZiAoIXN0dWRlbnRVc2VySWQpIHtcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcbiAgICAgICAgeyBlcnJvcjogXCJVc2VyIElEIGlzIHJlcXVpcmVkXCIgfSxcbiAgICAgICAgeyBzdGF0dXM6IDQwMCB9XG4gICAgICApO1xuICAgIH1cblxuICAgIGNvbnN0IHdoZXJlOiBhbnkgPSB7XG4gICAgICBpc0FjdGl2ZTogdHJ1ZSxcbiAgICAgIHN0YXJ0RGF0ZTogeyBsdGU6IG5ldyBEYXRlKCkgfSxcbiAgICAgIGVuZERhdGU6IHsgZ3RlOiBuZXcgRGF0ZSgpIH0sXG4gICAgfTtcblxuICAgIC8vIE9ubHkgZmlsdGVyIGJ5IG1vZHVsZUlkIGlmIGl0J3Mgc3BlY2lmaWNhbGx5IHByb3ZpZGVkXG4gICAgaWYgKG1vZHVsZUlkKSB7XG4gICAgICB3aGVyZS5tb2R1bGVJZCA9IG1vZHVsZUlkO1xuICAgIH1cblxuICAgIGNvbnN0IGV4YW1zID0gYXdhaXQgcHJpc21hLmV4YW0uZmluZE1hbnkoe1xuICAgICAgd2hlcmUsXG4gICAgICBpbmNsdWRlOiB7XG4gICAgICAgIHRlYWNoZXI6IHtcbiAgICAgICAgICBzZWxlY3Q6IHsgaWQ6IHRydWUsIG5hbWU6IHRydWUgfSxcbiAgICAgICAgfSxcbiAgICAgICAgbW9kdWxlOiB7XG4gICAgICAgICAgc2VsZWN0OiB7IGlkOiB0cnVlLCB0aXRsZTogdHJ1ZSB9LFxuICAgICAgICB9LFxuICAgICAgICBhdHRlbXB0czoge1xuICAgICAgICAgIHdoZXJlOiB7IHVzZXJJZDogc3R1ZGVudFVzZXJJZCB9LFxuICAgICAgICAgIG9yZGVyQnk6IHsgY3JlYXRlZEF0OiBcImRlc2NcIiB9LFxuICAgICAgICB9LFxuICAgICAgfSxcbiAgICAgIG9yZGVyQnk6IFt7IG1vZHVsZUlkOiBcImFzY1wiIH0sIHsgdGl0bGU6IFwiYXNjXCIgfV0sXG4gICAgfSk7XG5cbiAgICBjb25zb2xlLmxvZyhgRm91bmQgJHtleGFtcy5sZW5ndGh9IGV4YW1zIGZvciBzdHVkZW50ICR7c3R1ZGVudFVzZXJJZH1gKTtcblxuICAgIC8vIEFkZCBhdHRlbXB0IGluZm9ybWF0aW9uIGZvciBlYWNoIGV4YW1cbiAgICBjb25zdCBleGFtc1dpdGhBdHRlbXB0cyA9IGV4YW1zLm1hcCgoZXhhbTogYW55KSA9PiB7XG4gICAgICBjb25zdCB1c2VyQXR0ZW1wdHMgPSBleGFtLmF0dGVtcHRzO1xuICAgICAgY29uc3QgY29tcGxldGVkQXR0ZW1wdHMgPSB1c2VyQXR0ZW1wdHMuZmlsdGVyKFxuICAgICAgICAoYTogYW55KSA9PiBhLnN0YXR1cyA9PT0gXCJDT01QTEVURURcIlxuICAgICAgKS5sZW5ndGg7XG4gICAgICBjb25zdCBjYW5BdHRlbXB0ID0gY29tcGxldGVkQXR0ZW1wdHMgPCBleGFtLm1heEF0dGVtcHRzO1xuICAgICAgY29uc3QgYmVzdFNjb3JlID1cbiAgICAgICAgdXNlckF0dGVtcHRzLmxlbmd0aCA+IDBcbiAgICAgICAgICA/IE1hdGgubWF4KFxuICAgICAgICAgICAgICAuLi51c2VyQXR0ZW1wdHNcbiAgICAgICAgICAgICAgICAuZmlsdGVyKChhOiBhbnkpID0+IGEuc2NvcmUgIT09IG51bGwpXG4gICAgICAgICAgICAgICAgLm1hcCgoYTogYW55KSA9PiBhLnNjb3JlKVxuICAgICAgICAgICAgKVxuICAgICAgICAgIDogbnVsbDtcblxuICAgICAgY29uc3QgZXhhbVdpdGhTdGF0cyA9IHtcbiAgICAgICAgLi4uZXhhbSxcbiAgICAgICAgYXR0ZW1wdHM6IHVuZGVmaW5lZCwgLy8gUmVtb3ZlIGF0dGVtcHRzIGZyb20gcmVzcG9uc2UgZm9yIHNlY3VyaXR5XG4gICAgICAgIHF1ZXN0aW9uczogdW5kZWZpbmVkLCAvLyBSZW1vdmUgcXVlc3Rpb25zIGZvciBzZWN1cml0eVxuICAgICAgICB1c2VyU3RhdHM6IHtcbiAgICAgICAgICBhdHRlbXB0Q291bnQ6IHVzZXJBdHRlbXB0cy5sZW5ndGgsXG4gICAgICAgICAgY29tcGxldGVkQXR0ZW1wdHMsXG4gICAgICAgICAgY2FuQXR0ZW1wdCxcbiAgICAgICAgICBiZXN0U2NvcmUsXG4gICAgICAgICAgaGFzUGFzc2VkOiBiZXN0U2NvcmUgIT09IG51bGwgJiYgYmVzdFNjb3JlID49IGV4YW0ucGFzc2luZ01hcmtzLFxuICAgICAgICAgIGxhc3RBdHRlbXB0U3RhdHVzOlxuICAgICAgICAgICAgdXNlckF0dGVtcHRzLmxlbmd0aCA+IDAgPyB1c2VyQXR0ZW1wdHNbMF0uc3RhdHVzIDogbnVsbCxcbiAgICAgICAgfSxcbiAgICAgIH07XG5cbiAgICAgIC8vIExvZyBleGFtcyB3aXRob3V0IG1vZHVsZSBmb3IgZGVidWdnaW5nXG4gICAgICBpZiAoIWV4YW0ubW9kdWxlICYmICFleGFtLm1vZHVsZUlkKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKGBFeGFtICR7ZXhhbS5pZH0gKCR7ZXhhbS50aXRsZX0pIGhhcyBubyBtb2R1bGUgYXNzaWdubWVudGApO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gZXhhbVdpdGhTdGF0cztcbiAgICB9KTtcblxuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IGV4YW1zOiBleGFtc1dpdGhBdHRlbXB0cyB9KTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgZmV0Y2hpbmcgc3R1ZGVudCBleGFtczpcIiwgZXJyb3IpO1xuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcbiAgICAgIHsgZXJyb3I6IFwiRmFpbGVkIHRvIGZldGNoIGV4YW1zXCIgfSxcbiAgICAgIHsgc3RhdHVzOiA1MDAgfVxuICAgICk7XG4gIH1cbn1cblxuLy8gUE9TVCAvYXBpL3N0dWRlbnQvZXhhbXMgLSBTdGFydCBhIG5ldyBleGFtIGF0dGVtcHQgd2l0aCBwcm9jdG9yaW5nXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gUE9TVChyZXF1ZXN0OiBOZXh0UmVxdWVzdCkge1xuICB0cnkge1xuICAgIGNvbnN0IGJvZHkgPSBhd2FpdCByZXF1ZXN0Lmpzb24oKTtcbiAgICBjb25zdCB7IGV4YW1JZCwgdXNlcklkLCBkZXZpY2VJbmZvIH0gPSBib2R5O1xuXG4gICAgaWYgKCFleGFtSWQgfHwgIXVzZXJJZCkge1xuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxuICAgICAgICB7IGVycm9yOiBcIkV4YW0gSUQgYW5kIFVzZXIgSUQgYXJlIHJlcXVpcmVkXCIgfSxcbiAgICAgICAgeyBzdGF0dXM6IDQwMCB9XG4gICAgICApO1xuICAgIH1cblxuICAgIC8vIEdldCBleGFtIGRldGFpbHNcbiAgICBjb25zdCBleGFtID0gYXdhaXQgcHJpc21hLmV4YW0uZmluZFVuaXF1ZSh7XG4gICAgICB3aGVyZTogeyBpZDogZXhhbUlkIH0sXG4gICAgICBpbmNsdWRlOiB7XG4gICAgICAgIGF0dGVtcHRzOiB7XG4gICAgICAgICAgd2hlcmU6IHsgdXNlcklkIH0sXG4gICAgICAgIH0sXG4gICAgICB9LFxuICAgIH0pO1xuXG4gICAgaWYgKCFleGFtKSB7XG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBlcnJvcjogXCJFeGFtIG5vdCBmb3VuZFwiIH0sIHsgc3RhdHVzOiA0MDQgfSk7XG4gICAgfVxuXG4gICAgaWYgKCFleGFtLmlzQWN0aXZlKSB7XG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXG4gICAgICAgIHsgZXJyb3I6IFwiRXhhbSBpcyBub3QgYWN0aXZlXCIgfSxcbiAgICAgICAgeyBzdGF0dXM6IDQwMCB9XG4gICAgICApO1xuICAgIH1cblxuICAgIC8vIENoZWNrIGlmIGV4YW0gaXMgd2l0aGluIHRpbWUgYm91bmRzXG4gICAgY29uc3Qgbm93ID0gbmV3IERhdGUoKTtcbiAgICBpZiAoZXhhbS5zdGFydERhdGUgPiBub3cpIHtcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcbiAgICAgICAgeyBlcnJvcjogXCJFeGFtIGhhcyBub3Qgc3RhcnRlZCB5ZXRcIiB9LFxuICAgICAgICB7IHN0YXR1czogNDAwIH1cbiAgICAgICk7XG4gICAgfVxuXG4gICAgaWYgKGV4YW0uZW5kRGF0ZSA8IG5vdykge1xuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgZXJyb3I6IFwiRXhhbSBoYXMgZW5kZWRcIiB9LCB7IHN0YXR1czogNDAwIH0pO1xuICAgIH1cblxuICAgIC8vIENoZWNrIGF0dGVtcHQgbGltaXRzXG4gICAgY29uc3QgY29tcGxldGVkQXR0ZW1wdHMgPSBleGFtLmF0dGVtcHRzLmZpbHRlcihcbiAgICAgIChhKSA9PiBhLnN0YXR1cyA9PT0gXCJDT01QTEVURURcIiB8fCBhLnN0YXR1cyA9PT0gXCJGQUlMRURcIlxuICAgICkubGVuZ3RoO1xuICAgIGlmIChjb21wbGV0ZWRBdHRlbXB0cyA+PSBleGFtLm1heEF0dGVtcHRzKSB7XG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXG4gICAgICAgIHsgZXJyb3I6IFwiTWF4aW11bSBhdHRlbXB0cyByZWFjaGVkXCIgfSxcbiAgICAgICAgeyBzdGF0dXM6IDQwMCB9XG4gICAgICApO1xuICAgIH1cblxuICAgIC8vIENoZWNrIGZvciBleGlzdGluZyBpbi1wcm9ncmVzcyBhdHRlbXB0XG4gICAgY29uc3QgaW5Qcm9ncmVzc0F0dGVtcHQgPSBleGFtLmF0dGVtcHRzLmZpbmQoXG4gICAgICAoYSkgPT4gYS5zdGF0dXMgPT09IFwiSU5fUFJPR1JFU1NcIlxuICAgICk7XG4gICAgaWYgKGluUHJvZ3Jlc3NBdHRlbXB0KSB7XG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXG4gICAgICAgIHsgZXJyb3I6IFwiWW91IGhhdmUgYW4gaW4tcHJvZ3Jlc3MgYXR0ZW1wdC4gUGxlYXNlIGNvbXBsZXRlIGl0IGZpcnN0LlwiIH0sXG4gICAgICAgIHsgc3RhdHVzOiA0MDAgfVxuICAgICAgKTtcbiAgICB9XG5cbiAgICAvLyBHZXQgY2xpZW50IGluZm9ybWF0aW9uXG4gICAgY29uc3QgdXNlckFnZW50ID0gcmVxdWVzdC5oZWFkZXJzLmdldChcInVzZXItYWdlbnRcIikgfHwgXCJcIjtcbiAgICBjb25zdCBpcEFkZHJlc3MgPVxuICAgICAgcmVxdWVzdC5oZWFkZXJzLmdldChcIngtZm9yd2FyZGVkLWZvclwiKSB8fFxuICAgICAgcmVxdWVzdC5oZWFkZXJzLmdldChcIngtcmVhbC1pcFwiKSB8fFxuICAgICAgXCJ1bmtub3duXCI7XG5cbiAgICAvLyBWYWxpZGF0ZSBkZXZpY2UgaW5mbyBmb3IgcHJvY3RvcmluZ1xuICAgIGlmIChcbiAgICAgIGV4YW0ucHJvY3RvcmluZ0VuYWJsZWQgJiZcbiAgICAgICghZGV2aWNlSW5mbyB8fCAhZGV2aWNlSW5mby5zY3JlZW5SZXNvbHV0aW9uKVxuICAgICkge1xuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxuICAgICAgICB7IGVycm9yOiBcIkRldmljZSBpbmZvcm1hdGlvbiByZXF1aXJlZCBmb3IgcHJvY3RvcmVkIGV4YW1cIiB9LFxuICAgICAgICB7IHN0YXR1czogNDAwIH1cbiAgICAgICk7XG4gICAgfVxuXG4gICAgLy8gUHJlcGFyZSBxdWVzdGlvbnMgKHJlbW92ZSBjb3JyZWN0IGFuc3dlcnMpXG4gICAgY29uc3QgcXVlc3Rpb25zRm9yU3R1ZGVudCA9IChleGFtLnF1ZXN0aW9ucyBhcyBhbnlbXSkubWFwKChxLCBpbmRleCkgPT4gKHtcbiAgICAgIGlkOiBpbmRleCxcbiAgICAgIHF1ZXN0aW9uOiBxLnF1ZXN0aW9uLFxuICAgICAgb3B0aW9uczogZXhhbS5zaHVmZmxlT3B0aW9ucyA/IHNodWZmbGVBcnJheShbLi4ucS5vcHRpb25zXSkgOiBxLm9wdGlvbnMsXG4gICAgICBtYXJrczogcS5tYXJrcyxcbiAgICB9KSk7XG5cbiAgICAvLyBTaHVmZmxlIHF1ZXN0aW9ucyBpZiByZXF1aXJlZFxuICAgIGNvbnN0IGZpbmFsUXVlc3Rpb25zID0gZXhhbS5zaHVmZmxlUXVlc3Rpb25zXG4gICAgICA/IHNodWZmbGVBcnJheShbLi4ucXVlc3Rpb25zRm9yU3R1ZGVudF0pXG4gICAgICA6IHF1ZXN0aW9uc0ZvclN0dWRlbnQ7XG5cbiAgICAvLyBDcmVhdGUgZXhhbSBhdHRlbXB0XG4gICAgY29uc3QgYXR0ZW1wdCA9IGF3YWl0IHByaXNtYS5leGFtQXR0ZW1wdC5jcmVhdGUoe1xuICAgICAgZGF0YToge1xuICAgICAgICBleGFtSWQsXG4gICAgICAgIHVzZXJJZCxcbiAgICAgICAgYW5zd2Vyczoge30sXG4gICAgICAgIHRpbWVTcGVudDogMCxcbiAgICAgICAgaXBBZGRyZXNzLFxuICAgICAgICB1c2VyQWdlbnQ6IHsgdXNlckFnZW50LCAuLi5kZXZpY2VJbmZvIH0sXG4gICAgICAgIHNjcmVlblJlc29sdXRpb246IGRldmljZUluZm8/LnNjcmVlblJlc29sdXRpb24gfHwge30sXG4gICAgICAgIHN0YXR1czogXCJJTl9QUk9HUkVTU1wiLFxuICAgICAgfSxcbiAgICB9KTtcblxuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7XG4gICAgICBhdHRlbXB0OiB7XG4gICAgICAgIGlkOiBhdHRlbXB0LmlkLFxuICAgICAgICBleGFtSWQ6IGF0dGVtcHQuZXhhbUlkLFxuICAgICAgICBzdGFydFRpbWU6IGF0dGVtcHQuc3RhcnRUaW1lLFxuICAgICAgICBkdXJhdGlvbjogZXhhbS5kdXJhdGlvbixcbiAgICAgICAgdG90YWxNYXJrczogZXhhbS50b3RhbE1hcmtzLFxuICAgICAgICBxdWVzdGlvbnM6IGZpbmFsUXVlc3Rpb25zLFxuICAgICAgICBwcm9jdG9yaW5nU2V0dGluZ3M6IHtcbiAgICAgICAgICBwcm9jdG9yaW5nRW5hYmxlZDogZXhhbS5wcm9jdG9yaW5nRW5hYmxlZCxcbiAgICAgICAgICBhbGxvd1RhYlN3aXRjaDogZXhhbS5hbGxvd1RhYlN3aXRjaCxcbiAgICAgICAgICBtYXhUYWJTd2l0Y2hlczogZXhhbS5tYXhUYWJTd2l0Y2hlcyxcbiAgICAgICAgICB3ZWJjYW1SZXF1aXJlZDogZXhhbS53ZWJjYW1SZXF1aXJlZCxcbiAgICAgICAgICBmdWxsU2NyZWVuUmVxdWlyZWQ6IGV4YW0uZnVsbFNjcmVlblJlcXVpcmVkLFxuICAgICAgICB9LFxuICAgICAgfSxcbiAgICB9KTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKFwiRXJyb3Igc3RhcnRpbmcgZXhhbSBhdHRlbXB0OlwiLCBlcnJvcik7XG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxuICAgICAgeyBlcnJvcjogXCJGYWlsZWQgdG8gc3RhcnQgZXhhbSBhdHRlbXB0XCIgfSxcbiAgICAgIHsgc3RhdHVzOiA1MDAgfVxuICAgICk7XG4gIH1cbn1cblxuLy8gVXRpbGl0eSBmdW5jdGlvbiB0byBzaHVmZmxlIGFycmF5XG5mdW5jdGlvbiBzaHVmZmxlQXJyYXkoYXJyYXk6IGFueVtdKSB7XG4gIGNvbnN0IHNodWZmbGVkID0gWy4uLmFycmF5XTtcbiAgZm9yIChsZXQgaSA9IHNodWZmbGVkLmxlbmd0aCAtIDE7IGkgPiAwOyBpLS0pIHtcbiAgICBjb25zdCBqID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogKGkgKyAxKSk7XG4gICAgW3NodWZmbGVkW2ldLCBzaHVmZmxlZFtqXV0gPSBbc2h1ZmZsZWRbal0sIHNodWZmbGVkW2ldXTtcbiAgfVxuICByZXR1cm4gc2h1ZmZsZWQ7XG59XG4iXSwibmFtZXMiOlsiTmV4dFJlc3BvbnNlIiwicHJpc21hIiwiZ2V0VXNlckZyb21SZXF1ZXN0IiwiR0VUIiwicmVxdWVzdCIsInNlYXJjaFBhcmFtcyIsIlVSTCIsInVybCIsInVzZXJJZCIsImdldCIsIm1vZHVsZUlkIiwiYXV0aGVudGljYXRlZFVzZXIiLCJzdHVkZW50VXNlcklkIiwicm9sZSIsImlkIiwianNvbiIsImVycm9yIiwic3RhdHVzIiwid2hlcmUiLCJpc0FjdGl2ZSIsInN0YXJ0RGF0ZSIsImx0ZSIsIkRhdGUiLCJlbmREYXRlIiwiZ3RlIiwiZXhhbXMiLCJleGFtIiwiZmluZE1hbnkiLCJpbmNsdWRlIiwidGVhY2hlciIsInNlbGVjdCIsIm5hbWUiLCJtb2R1bGUiLCJ0aXRsZSIsImF0dGVtcHRzIiwib3JkZXJCeSIsImNyZWF0ZWRBdCIsImNvbnNvbGUiLCJsb2ciLCJsZW5ndGgiLCJleGFtc1dpdGhBdHRlbXB0cyIsIm1hcCIsInVzZXJBdHRlbXB0cyIsImNvbXBsZXRlZEF0dGVtcHRzIiwiZmlsdGVyIiwiYSIsImNhbkF0dGVtcHQiLCJtYXhBdHRlbXB0cyIsImJlc3RTY29yZSIsIk1hdGgiLCJtYXgiLCJzY29yZSIsImV4YW1XaXRoU3RhdHMiLCJ1bmRlZmluZWQiLCJxdWVzdGlvbnMiLCJ1c2VyU3RhdHMiLCJhdHRlbXB0Q291bnQiLCJoYXNQYXNzZWQiLCJwYXNzaW5nTWFya3MiLCJsYXN0QXR0ZW1wdFN0YXR1cyIsIlBPU1QiLCJib2R5IiwiZXhhbUlkIiwiZGV2aWNlSW5mbyIsImZpbmRVbmlxdWUiLCJub3ciLCJpblByb2dyZXNzQXR0ZW1wdCIsImZpbmQiLCJ1c2VyQWdlbnQiLCJoZWFkZXJzIiwiaXBBZGRyZXNzIiwicHJvY3RvcmluZ0VuYWJsZWQiLCJzY3JlZW5SZXNvbHV0aW9uIiwicXVlc3Rpb25zRm9yU3R1ZGVudCIsInEiLCJpbmRleCIsInF1ZXN0aW9uIiwib3B0aW9ucyIsInNodWZmbGVPcHRpb25zIiwic2h1ZmZsZUFycmF5IiwibWFya3MiLCJmaW5hbFF1ZXN0aW9ucyIsInNodWZmbGVRdWVzdGlvbnMiLCJhdHRlbXB0IiwiZXhhbUF0dGVtcHQiLCJjcmVhdGUiLCJkYXRhIiwiYW5zd2VycyIsInRpbWVTcGVudCIsInN0YXJ0VGltZSIsImR1cmF0aW9uIiwidG90YWxNYXJrcyIsInByb2N0b3JpbmdTZXR0aW5ncyIsImFsbG93VGFiU3dpdGNoIiwibWF4VGFiU3dpdGNoZXMiLCJ3ZWJjYW1SZXF1aXJlZCIsImZ1bGxTY3JlZW5SZXF1aXJlZCIsImFycmF5Iiwic2h1ZmZsZWQiLCJpIiwiaiIsImZsb29yIiwicmFuZG9tIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./src/app/api/student/exams/route.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/auth.ts":
/*!*************************!*\
  !*** ./src/lib/auth.ts ***!
  \*************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getUserFromRequest: () => (/* binding */ getUserFromRequest),\n/* harmony export */   requireStudent: () => (/* binding */ requireStudent),\n/* harmony export */   requireTeacher: () => (/* binding */ requireTeacher)\n/* harmony export */ });\n/* harmony import */ var jsonwebtoken__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jsonwebtoken */ \"(rsc)/./node_modules/jsonwebtoken/index.js\");\n/* harmony import */ var jsonwebtoken__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(jsonwebtoken__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _lib_prisma__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/prisma */ \"(rsc)/./src/lib/prisma.ts\");\n\n\nasync function getUserFromRequest(request) {\n    try {\n        // First, try to get token from Authorization header (for API calls)\n        let token = request.headers.get(\"authorization\");\n        if (token && token.startsWith(\"Bearer \")) {\n            token = token.substring(7);\n        } else {\n            // If no Authorization header, try to get from cookies (for SSR)\n            token = request.cookies.get(\"auth-token\")?.value || null;\n        }\n        if (!token) {\n            return null;\n        }\n        // Verify the JWT token\n        const decoded = jsonwebtoken__WEBPACK_IMPORTED_MODULE_0___default().verify(token, process.env.JWT_SECRET || \"your-secret-key\");\n        // Get user from database to ensure they still exist\n        const user = await _lib_prisma__WEBPACK_IMPORTED_MODULE_1__.prisma.user.findUnique({\n            where: {\n                id: decoded.userId\n            },\n            select: {\n                id: true,\n                email: true,\n                name: true,\n                role: true,\n                grade: true,\n                school: true\n            }\n        });\n        return user;\n    } catch (error) {\n        console.error(\"Error extracting user from request:\", error);\n        return null;\n    }\n}\nasync function requireTeacher(request) {\n    const user = await getUserFromRequest(request);\n    if (!user) {\n        throw new Error(\"Authentication required\");\n    }\n    if (user.role !== \"TEACHER\") {\n        throw new Error(\"Teacher access required\");\n    }\n    return user;\n}\nasync function requireStudent(request) {\n    const user = await getUserFromRequest(request);\n    if (!user) {\n        throw new Error(\"Authentication required\");\n    }\n    if (user.role !== \"STUDENT\") {\n        throw new Error(\"Student access required\");\n    }\n    return user;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbGliL2F1dGgudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7O0FBQStCO0FBRU87QUFRL0IsZUFBZUUsbUJBQW1CQyxPQUFvQjtJQUMzRCxJQUFJO1FBQ0Ysb0VBQW9FO1FBQ3BFLElBQUlDLFFBQVFELFFBQVFFLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDO1FBQ2hDLElBQUlGLFNBQVNBLE1BQU1HLFVBQVUsQ0FBQyxZQUFZO1lBQ3hDSCxRQUFRQSxNQUFNSSxTQUFTLENBQUM7UUFDMUIsT0FBTztZQUNMLGdFQUFnRTtZQUNoRUosUUFBUUQsUUFBUU0sT0FBTyxDQUFDSCxHQUFHLENBQUMsZUFBZUksU0FBUztRQUN0RDtRQUVBLElBQUksQ0FBQ04sT0FBTztZQUNWLE9BQU87UUFDVDtRQUVBLHVCQUF1QjtRQUN2QixNQUFNTyxVQUFVWCwwREFBVSxDQUN4QkksT0FDQVMsUUFBUUMsR0FBRyxDQUFDQyxVQUFVLElBQUk7UUFHNUIsb0RBQW9EO1FBQ3BELE1BQU1DLE9BQU8sTUFBTWYsK0NBQU1BLENBQUNlLElBQUksQ0FBQ0MsVUFBVSxDQUFDO1lBQ3hDQyxPQUFPO2dCQUFFQyxJQUFJUixRQUFRUyxNQUFNO1lBQUM7WUFDNUJDLFFBQVE7Z0JBQ05GLElBQUk7Z0JBQ0pHLE9BQU87Z0JBQ1BDLE1BQU07Z0JBQ05DLE1BQU07Z0JBQ05DLE9BQU87Z0JBQ1BDLFFBQVE7WUFDVjtRQUNGO1FBRUEsT0FBT1Y7SUFDVCxFQUFFLE9BQU9XLE9BQU87UUFDZEMsUUFBUUQsS0FBSyxDQUFDLHVDQUF1Q0E7UUFDckQsT0FBTztJQUNUO0FBQ0Y7QUFFTyxlQUFlRSxlQUFlMUIsT0FBb0I7SUFDdkQsTUFBTWEsT0FBTyxNQUFNZCxtQkFBbUJDO0lBRXRDLElBQUksQ0FBQ2EsTUFBTTtRQUNULE1BQU0sSUFBSWMsTUFBTTtJQUNsQjtJQUVBLElBQUlkLEtBQUtRLElBQUksS0FBSyxXQUFXO1FBQzNCLE1BQU0sSUFBSU0sTUFBTTtJQUNsQjtJQUVBLE9BQU9kO0FBQ1Q7QUFFTyxlQUFlZSxlQUFlNUIsT0FBb0I7SUFDdkQsTUFBTWEsT0FBTyxNQUFNZCxtQkFBbUJDO0lBRXRDLElBQUksQ0FBQ2EsTUFBTTtRQUNULE1BQU0sSUFBSWMsTUFBTTtJQUNsQjtJQUVBLElBQUlkLEtBQUtRLElBQUksS0FBSyxXQUFXO1FBQzNCLE1BQU0sSUFBSU0sTUFBTTtJQUNsQjtJQUVBLE9BQU9kO0FBQ1QiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9kaWdpdGFsLWxpdGVyYWN5LXBvcnRhbC8uL3NyYy9saWIvYXV0aC50cz82NjkyIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBqd3QgZnJvbSBcImpzb253ZWJ0b2tlblwiO1xuaW1wb3J0IHsgTmV4dFJlcXVlc3QgfSBmcm9tIFwibmV4dC9zZXJ2ZXJcIjtcbmltcG9ydCB7IHByaXNtYSB9IGZyb20gXCJAL2xpYi9wcmlzbWFcIjtcblxuaW50ZXJmYWNlIEpXVFBheWxvYWQge1xuICB1c2VySWQ6IHN0cmluZztcbiAgZW1haWw6IHN0cmluZztcbiAgcm9sZTogc3RyaW5nO1xufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0VXNlckZyb21SZXF1ZXN0KHJlcXVlc3Q6IE5leHRSZXF1ZXN0KSB7XG4gIHRyeSB7XG4gICAgLy8gRmlyc3QsIHRyeSB0byBnZXQgdG9rZW4gZnJvbSBBdXRob3JpemF0aW9uIGhlYWRlciAoZm9yIEFQSSBjYWxscylcbiAgICBsZXQgdG9rZW4gPSByZXF1ZXN0LmhlYWRlcnMuZ2V0KFwiYXV0aG9yaXphdGlvblwiKTtcbiAgICBpZiAodG9rZW4gJiYgdG9rZW4uc3RhcnRzV2l0aChcIkJlYXJlciBcIikpIHtcbiAgICAgIHRva2VuID0gdG9rZW4uc3Vic3RyaW5nKDcpO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBJZiBubyBBdXRob3JpemF0aW9uIGhlYWRlciwgdHJ5IHRvIGdldCBmcm9tIGNvb2tpZXMgKGZvciBTU1IpXG4gICAgICB0b2tlbiA9IHJlcXVlc3QuY29va2llcy5nZXQoXCJhdXRoLXRva2VuXCIpPy52YWx1ZSB8fCBudWxsO1xuICAgIH1cblxuICAgIGlmICghdG9rZW4pIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIC8vIFZlcmlmeSB0aGUgSldUIHRva2VuXG4gICAgY29uc3QgZGVjb2RlZCA9IGp3dC52ZXJpZnkoXG4gICAgICB0b2tlbixcbiAgICAgIHByb2Nlc3MuZW52LkpXVF9TRUNSRVQgfHwgXCJ5b3VyLXNlY3JldC1rZXlcIlxuICAgICkgYXMgSldUUGF5bG9hZDtcblxuICAgIC8vIEdldCB1c2VyIGZyb20gZGF0YWJhc2UgdG8gZW5zdXJlIHRoZXkgc3RpbGwgZXhpc3RcbiAgICBjb25zdCB1c2VyID0gYXdhaXQgcHJpc21hLnVzZXIuZmluZFVuaXF1ZSh7XG4gICAgICB3aGVyZTogeyBpZDogZGVjb2RlZC51c2VySWQgfSxcbiAgICAgIHNlbGVjdDoge1xuICAgICAgICBpZDogdHJ1ZSxcbiAgICAgICAgZW1haWw6IHRydWUsXG4gICAgICAgIG5hbWU6IHRydWUsXG4gICAgICAgIHJvbGU6IHRydWUsXG4gICAgICAgIGdyYWRlOiB0cnVlLFxuICAgICAgICBzY2hvb2w6IHRydWUsXG4gICAgICB9LFxuICAgIH0pO1xuXG4gICAgcmV0dXJuIHVzZXI7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcihcIkVycm9yIGV4dHJhY3RpbmcgdXNlciBmcm9tIHJlcXVlc3Q6XCIsIGVycm9yKTtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gcmVxdWlyZVRlYWNoZXIocmVxdWVzdDogTmV4dFJlcXVlc3QpIHtcbiAgY29uc3QgdXNlciA9IGF3YWl0IGdldFVzZXJGcm9tUmVxdWVzdChyZXF1ZXN0KTtcblxuICBpZiAoIXVzZXIpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJBdXRoZW50aWNhdGlvbiByZXF1aXJlZFwiKTtcbiAgfVxuXG4gIGlmICh1c2VyLnJvbGUgIT09IFwiVEVBQ0hFUlwiKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFwiVGVhY2hlciBhY2Nlc3MgcmVxdWlyZWRcIik7XG4gIH1cblxuICByZXR1cm4gdXNlcjtcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHJlcXVpcmVTdHVkZW50KHJlcXVlc3Q6IE5leHRSZXF1ZXN0KSB7XG4gIGNvbnN0IHVzZXIgPSBhd2FpdCBnZXRVc2VyRnJvbVJlcXVlc3QocmVxdWVzdCk7XG5cbiAgaWYgKCF1c2VyKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFwiQXV0aGVudGljYXRpb24gcmVxdWlyZWRcIik7XG4gIH1cblxuICBpZiAodXNlci5yb2xlICE9PSBcIlNUVURFTlRcIikge1xuICAgIHRocm93IG5ldyBFcnJvcihcIlN0dWRlbnQgYWNjZXNzIHJlcXVpcmVkXCIpO1xuICB9XG5cbiAgcmV0dXJuIHVzZXI7XG59XG4iXSwibmFtZXMiOlsiand0IiwicHJpc21hIiwiZ2V0VXNlckZyb21SZXF1ZXN0IiwicmVxdWVzdCIsInRva2VuIiwiaGVhZGVycyIsImdldCIsInN0YXJ0c1dpdGgiLCJzdWJzdHJpbmciLCJjb29raWVzIiwidmFsdWUiLCJkZWNvZGVkIiwidmVyaWZ5IiwicHJvY2VzcyIsImVudiIsIkpXVF9TRUNSRVQiLCJ1c2VyIiwiZmluZFVuaXF1ZSIsIndoZXJlIiwiaWQiLCJ1c2VySWQiLCJzZWxlY3QiLCJlbWFpbCIsIm5hbWUiLCJyb2xlIiwiZ3JhZGUiLCJzY2hvb2wiLCJlcnJvciIsImNvbnNvbGUiLCJyZXF1aXJlVGVhY2hlciIsIkVycm9yIiwicmVxdWlyZVN0dWRlbnQiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/auth.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/prisma.ts":
/*!***************************!*\
  !*** ./src/lib/prisma.ts ***!
  \***************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   prisma: () => (/* binding */ prisma)\n/* harmony export */ });\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @prisma/client */ \"@prisma/client\");\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_prisma_client__WEBPACK_IMPORTED_MODULE_0__);\n\nconst globalForPrisma = globalThis;\nconst prisma = globalForPrisma.prisma ?? new _prisma_client__WEBPACK_IMPORTED_MODULE_0__.PrismaClient();\nif (true) globalForPrisma.prisma = prisma;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbGliL3ByaXNtYS50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBNkM7QUFFN0MsTUFBTUMsa0JBQWtCQztBQUlqQixNQUFNQyxTQUFTRixnQkFBZ0JFLE1BQU0sSUFBSSxJQUFJSCx3REFBWUEsR0FBRTtBQUVsRSxJQUFJSSxJQUF5QixFQUFjSCxnQkFBZ0JFLE1BQU0sR0FBR0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9kaWdpdGFsLWxpdGVyYWN5LXBvcnRhbC8uL3NyYy9saWIvcHJpc21hLnRzPzAxZDciXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgUHJpc21hQ2xpZW50IH0gZnJvbSAnQHByaXNtYS9jbGllbnQnXG5cbmNvbnN0IGdsb2JhbEZvclByaXNtYSA9IGdsb2JhbFRoaXMgYXMgdW5rbm93biBhcyB7XG4gIHByaXNtYTogUHJpc21hQ2xpZW50IHwgdW5kZWZpbmVkXG59XG5cbmV4cG9ydCBjb25zdCBwcmlzbWEgPSBnbG9iYWxGb3JQcmlzbWEucHJpc21hID8/IG5ldyBQcmlzbWFDbGllbnQoKVxuXG5pZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgZ2xvYmFsRm9yUHJpc21hLnByaXNtYSA9IHByaXNtYSJdLCJuYW1lcyI6WyJQcmlzbWFDbGllbnQiLCJnbG9iYWxGb3JQcmlzbWEiLCJnbG9iYWxUaGlzIiwicHJpc21hIiwicHJvY2VzcyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/prisma.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/jsonwebtoken","vendor-chunks/lodash.includes","vendor-chunks/jws","vendor-chunks/lodash.once","vendor-chunks/jwa","vendor-chunks/lodash.isinteger","vendor-chunks/ecdsa-sig-formatter","vendor-chunks/lodash.isplainobject","vendor-chunks/ms","vendor-chunks/lodash.isstring","vendor-chunks/lodash.isnumber","vendor-chunks/lodash.isboolean","vendor-chunks/safe-buffer","vendor-chunks/buffer-equal-constant-time"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fstudent%2Fexams%2Froute&page=%2Fapi%2Fstudent%2Fexams%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fstudent%2Fexams%2Froute.ts&appDir=C%3A%5CUsers%5Cpc%5CDownloads%5Cproject%5Cproject%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5Cpc%5CDownloads%5Cproject%5Cproject&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();